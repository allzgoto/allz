<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Shadow Fight 2 — Entry</title>

<style>
  *{margin:0;padding:0;box-sizing:border-box}
  html,body{width:100%;height:100%;overflow:hidden;background:#000}

  :root{
    --ember: rgba(255,140,70,0.9);
    --ember2: rgba(255,190,120,0.25);
    --gold: rgba(210,170,80,0.22);
  }

  /* vídeo principal */
  #mainVideo{
    position:fixed; inset:0;
    width:100%; height:100%;
    object-fit:cover;
    z-index:0;
    opacity:0;
    transition:opacity 700ms ease;
    filter:contrast(1.08) saturate(0.9);
  }
  body.entered #mainVideo{opacity:1}

  /* entry */
  #entry{
    position:fixed; inset:0;
    z-index:10;
    display:grid;
    place-items:center;
    cursor:pointer;
    user-select:none;
    background:linear-gradient(to bottom, #0b0a08, #050505);
  }

  /* “pergaminho” sujo */
  #entry::before{
    content:"";
    position:absolute; inset:-70px;
    background:
      radial-gradient(circle at 20% 30%, rgba(255,255,255,0.05), transparent 55%),
      radial-gradient(circle at 75% 55%, rgba(255,255,255,0.035), transparent 58%),
      radial-gradient(circle at 50% 88%, rgba(255,140,70,0.03), transparent 55%),
      repeating-linear-gradient(100deg, rgba(255,255,255,0.02) 0 2px, transparent 2px 18px),
      repeating-linear-gradient(0deg, rgba(0,0,0,0.42) 0 1px, transparent 1px 5px);
    opacity:.95;
    filter:blur(0.25px);
    pointer-events:none;
  }

  /* vinheta pesada */
  #entry::after{
    content:"";
    position:absolute; inset:0;
    background:radial-gradient(circle at center, rgba(0,0,0,0.08) 20%, rgba(0,0,0,0.92) 100%);
    pointer-events:none;
  }

  /* partículas */
  #fx{ position:absolute; inset:0; z-index:1; pointer-events:none; }

  /* glow baixo (brasas no chão) */
  .ground{
    position:absolute; left:0; right:0; bottom:-18%;
    height:55%;
    z-index:2;
    background:radial-gradient(circle at 50% 90%, rgba(255,140,70,0.10), transparent 62%);
    filter:blur(12px);
    pointer-events:none;
  }

  /* centro */
  .center{
    position:relative;
    width:min(520px, 86vw);
    height:min(520px, 86vw);
    display:grid;
    place-items:center;
    z-index:5;
  }

  /* selo de tinta pincelada (SVG) */
  .seal{
    width:min(320px, 62vw);
    aspect-ratio:1/1;
    filter:drop-shadow(0 0 24px rgba(255,140,70,0.10));
    opacity:.95;
    transform:translateY(6px);
    transition:transform 520ms cubic-bezier(.2,.9,.2,1), opacity 520ms ease;
  }

  .seal .ink{
    stroke:rgba(255,170,110,0.20);
    stroke-width:10;
    fill:none;
    stroke-linecap:round;
    stroke-linejoin:round;
    opacity:.95;
  }

  .seal .ink2{
    stroke:rgba(255,255,255,0.07);
    stroke-width:4;
    fill:none;
    stroke-linecap:round;
    opacity:.9;
  }

  .seal .smoke-ring{
    stroke:rgba(255,140,70,0.10);
    stroke-width:2;
    fill:none;
    opacity:.7;
    stroke-dasharray:10 14;
    animation:drift 12s linear infinite;
    transform-origin:50% 50%;
  }
  @keyframes drift{to{transform:rotate(360deg)}}

  /* pulsa MUITO sutil */
  .seal-wrap{
    position:relative;
    animation:pulse 2.8s ease-in-out infinite;
  }
  @keyframes pulse{
    0%,100%{transform:scale(0.99)}
    50%{transform:scale(1.01)}
  }

  /* texto */
  .divider{
    position:absolute;
    bottom:44px;
    left:50%;
    width:min(520px, 80vw);
    height:1px;
    transform:translateX(-50%);
    background:linear-gradient(90deg, transparent, var(--gold), transparent);
    opacity:.55;
  }
  .title{
    position:absolute;
    bottom:24px;
    width:100%;
    text-align:center;
    font-size:12px;
    letter-spacing:6px;
    color:rgba(220,190,110,0.22);
    text-transform:uppercase;
  }
  .subtitle{
    position:absolute;
    bottom:6px;
    width:100%;
    text-align:center;
    font-size:12px;
    letter-spacing:4px;
    color:rgba(255,255,255,0.18);
    text-transform:uppercase;
  }

  /* corte (slash) */
  .slash{
    position:fixed; inset:-30%;
    z-index:9;
    pointer-events:none;
    opacity:0;
    transform:rotate(-18deg) translateX(-50%);
    background:linear-gradient(90deg,
      transparent 0%,
      rgba(255,180,110,0.18) 44%,
      rgba(255,140,70,0.78) 50%,
      rgba(255,180,110,0.18) 56%,
      transparent 100%);
  }

  /* rasgo */
  .tear{
    position:fixed;
    left:50%;
    top:-10%;
    height:120%;
    width:10px;
    transform:translateX(-50%);
    z-index:10;
    opacity:0;
    pointer-events:none;
    background:linear-gradient(to bottom,
      rgba(0,0,0,0) 0%,
      rgba(0,0,0,0.98) 18%,
      rgba(0,0,0,1) 50%,
      rgba(0,0,0,0.98) 82%,
      rgba(0,0,0,0) 100%);
  }
  .tear::before{
    content:"";
    position:absolute; inset:-14px;
    background:
      repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.0) 0 8px,
        rgba(255,140,70,0.10) 8px 10px,
        rgba(255,255,255,0.0) 10px 18px
      );
    opacity:.75;
    filter:blur(1.3px);
    mix-blend-mode:screen;
  }

  /* engolir */
  .swallow{
    position:fixed; inset:0;
    z-index:11;
    pointer-events:none;
    opacity:0;
    background:radial-gradient(circle at center,
      rgba(255,140,70,0.00) 0%,
      rgba(255,140,70,0.18) 35%,
      rgba(0,0,0,1) 74%);
    transform:scale(0.9);
  }

  /* ===== clique sequência ===== */
  body.sealLock .seal{ transform:translateY(6px) scale(0.97); opacity:.85; }
  body.sealLock .seal-wrap{ animation:none; }

  body.slashing .slash{
    opacity:1;
    animation:slashMove 260ms ease forwards;
  }
  @keyframes slashMove{
    0%{transform:rotate(-18deg) translateX(-60%)}
    100%{transform:rotate(-18deg) translateX(60%)}
  }

  body.slashing .tear{
    opacity:1;
    animation:tearGrow 520ms ease forwards;
  }
  @keyframes tearGrow{
    0%{width:10px}
    100%{width:92px}
  }

  body.slashing .swallow{
    opacity:1;
    transform:scale(1.25);
    transition:opacity 520ms ease, transform 520ms cubic-bezier(.12,.92,.12,1);
  }

  body.entered #entry{
    opacity:0;
    pointer-events:none;
    transition:opacity 520ms ease;
  }
</style>
</head>

<body>
  <video
    id="mainVideo"
    src="https://files.catbox.moe/klaol5.webm"
    playsinline
    preload="auto"
    muted
    loop
  ></video>

  <section id="entry" aria-label="Entrada Shadow Fight 2">
    <canvas id="fx"></canvas>
    <div class="ground" aria-hidden="true"></div>

    <div class="center">
      <div class="seal-wrap">
        <svg class="seal" viewBox="0 0 200 200" aria-hidden="true">
          <!-- círculo de tinta “pincelada” (imperfeito) -->
          <path class="ink" d="M40 112
            C28 86, 46 52, 76 44
            C102 37, 126 44, 148 62
            C172 80, 174 110, 156 136
            C140 160, 106 174, 78 164
            C56 156, 48 140, 40 112" />

          <!-- segunda camada “sujando” -->
          <path class="ink2" d="M52 116
            C46 92, 58 66, 84 58
            C110 50, 132 62, 144 80
            C156 98, 152 120, 138 136
            C120 156, 92 160, 72 150
            C60 144, 56 132, 52 116" />

          <!-- fumaça circular muito leve -->
          <circle class="smoke-ring" cx="100" cy="100" r="74" />
          <circle class="smoke-ring" cx="100" cy="100" r="62" style="opacity:.35; stroke-dasharray:6 12; animation-duration:18s"/>
        </svg>
      </div>

      <div class="divider" aria-hidden="true"></div>
      <div class="title">DESPERTE A SOMBRA</div>
      <div class="subtitle">CLIQUE PARA ENTRAR</div>
    </div>

    <div class="slash" aria-hidden="true"></div>
    <div class="tear" aria-hidden="true"></div>
    <div class="swallow" aria-hidden="true"></div>
  </section>

<script>
  const entry = document.getElementById("entry");
  const mainVideo = document.getElementById("mainVideo");

  // FX: poeira/brasas laranja (vento lateral)
  const canvas = document.getElementById("fx");
  const ctx = canvas.getContext("2d", { alpha:true });
  let W=0,H=0,DPR=1;

  const parts = [];
  const COUNT = 160;
  const rand=(a,b)=>Math.random()*(b-a)+a;

  function resize(){
    DPR = devicePixelRatio || 1;
    W = canvas.width = innerWidth * DPR;
    H = canvas.height = innerHeight * DPR;
  }
  addEventListener("resize", resize);
  resize();

  function spawn(){
    return {
      x: rand(-W*0.1, W*1.1),
      y: rand(H*0.45, H*1.05),
      r: rand(0.6, 2.8)*DPR,
      vx: rand(0.10, 0.62)*DPR,
      vy: rand(-0.10, -0.70)*DPR,
      a: rand(0.02, 0.18),
      wob: rand(0.002, 0.008),
      life: rand(0.7, 1.3)
    };
  }
  for(let i=0;i<COUNT;i++) parts.push(spawn());

  function draw(){
    ctx.clearRect(0,0,W,H);

    for(const p of parts){
      p.x += p.vx + Math.sin(p.y*p.wob)*(0.35*DPR);
      p.y += p.vy;

      if(p.x > W+80 || p.y < -80){
        Object.assign(p, spawn());
        p.x = -60;
        p.y = rand(H*0.45, H*1.05);
      }

      const alpha = Math.max(0, Math.min(0.30, p.a))*p.life;

      ctx.beginPath();
      ctx.fillStyle = `rgba(255, 170, 110, ${alpha*0.35})`;
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fill();

      if(p.r > 2.2*DPR){
        ctx.beginPath();
        ctx.fillStyle = `rgba(255, 140, 70, ${alpha*0.20})`;
        ctx.arc(p.x, p.y, p.r*0.8, 0, Math.PI*2);
        ctx.fill();
      }
    }

    requestAnimationFrame(draw);
  }
  draw();

  // som “corte” (web audio)
  function playSlash(){
    try{
      const AC = window.AudioContext || window.webkitAudioContext;
      const ac = new AC();
      const now = ac.currentTime;

      const len = Math.floor(ac.sampleRate * 0.16);
      const buf = ac.createBuffer(1, len, ac.sampleRate);
      const d = buf.getChannelData(0);
      for(let i=0;i<d.length;i++) d[i] = (Math.random()*2-1) * (1 - i/d.length);

      const noise = ac.createBufferSource(); noise.buffer = buf;

      const hp = ac.createBiquadFilter();
      hp.type = "highpass";
      hp.frequency.setValueAtTime(700, now);

      const g = ac.createGain();
      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.18, now+0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, now+0.16);

      noise.connect(hp); hp.connect(g); g.connect(ac.destination);

      const osc = ac.createOscillator();
      osc.type = "triangle";
      osc.frequency.setValueAtTime(520, now);
      osc.frequency.exponentialRampToValueAtTime(210, now+0.12);

      const og = ac.createGain();
      og.gain.setValueAtTime(0.0001, now);
      og.gain.exponentialRampToValueAtTime(0.10, now+0.02);
      og.gain.exponentialRampToValueAtTime(0.0001, now+0.14);

      osc.connect(og); og.connect(ac.destination);

      noise.start(now); noise.stop(now+0.16);
      osc.start(now); osc.stop(now+0.14);

      setTimeout(()=>ac.close().catch(()=>{}), 600);
    }catch(e){}
  }

  // sequência
  let started=false;
  function start(){
    if(started) return;
    started=true;

    mainVideo.play().catch(()=>{});

    document.body.classList.add("sealLock");        // “trava” o selo

    setTimeout(()=>{
      playSlash();
      document.body.classList.add("slashing");      // corte + rasgo + engole
    }, 360);

    setTimeout(()=>{
      document.body.classList.add("entered");
      setTimeout(()=>{ entry.style.display="none"; }, 650);
    }, 1100);
  }

  entry.addEventListener("pointerdown", start);
  entry.addEventListener("keydown", (e)=>{
    if(e.key==="Enter" || e.key===" "){ e.preventDefault(); start(); }
  });
  entry.tabIndex = 0;
</script>
</body>
</html>
