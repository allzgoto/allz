<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dottore</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet" />

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  background:black;
  overflow:hidden;
  font-family:'Orbitron', sans-serif;
  color:white;
}

/* ========= VIDEO LAYERS ========= */
#videoBlur{
  position:fixed;
  inset:-20%;
  width:140%;
  height:140%;
  object-fit:cover;
  filter: blur(var(--blur-amount, 90px)) brightness(.5) saturate(1.5);
  will-change: transform, filter;
  transform: translateZ(0);
  z-index:-5;
}
#video{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
  z-index:-4;
  background:black;

  -webkit-mask-image: linear-gradient(to right, transparent 0%, black 8%, black 92%, transparent 100%);
  mask-image: linear-gradient(to right, transparent 0%, black 8%, black 92%, transparent 100%);
}

/* ========= FX OVERLAYS ========= */
.scanlines{
  position:fixed;
  inset:0;
  background:repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.03),
    rgba(255,255,255,0.03) 1px,
    transparent 1px,
    transparent 3px
  );
  pointer-events:none;
  z-index:3;
  mix-blend-mode:overlay;
  opacity:.75;
}

/* Grain + vinheta */
#cinemaFX{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:4;
}
#cinemaFX::before{
  content:"";
  position:absolute;
  inset:-20%;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  opacity:.08;
  mix-blend-mode:overlay;
  transform: translateZ(0);
  animation:grain 5s steps(10) infinite;
}
#cinemaFX::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 50% 45%, transparent 0 55%, rgba(0,0,0,.55) 78%, rgba(0,0,0,.85) 100%),
    linear-gradient(90deg, rgba(0,200,255,.05), transparent 35%, transparent 65%, rgba(0,200,255,.04));
  opacity:.65;
}
@keyframes grain{
  0%{transform:translate(0,0)}
  10%{transform:translate(-2%, -3%)}
  20%{transform:translate(-4%, 2%)}
  30%{transform:translate(3%, -2%)}
  40%{transform:translate(2%, 4%)}
  50%{transform:translate(-3%, 2%)}
  60%{transform:translate(4%, 0%)}
  70%{transform:translate(0%, 3%)}
  80%{transform:translate(-2%, -2%)}
  90%{transform:translate(3%, 1%)}
  100%{transform:translate(0,0)}
}

/* Glitch flash (só na entrada) */
#glitchFlash{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9;
  opacity:0;
  background:
    linear-gradient(90deg, rgba(0,200,255,.12), transparent 35%, rgba(255,90,90,.08)),
    repeating-linear-gradient(0deg, rgba(255,255,255,.06) 0 1px, transparent 1px 4px);
  mix-blend-mode:screen;
}
.glitch-on #glitchFlash{ animation:glitchFlash .55s steps(6) 1; }
@keyframes glitchFlash{
  0%{opacity:0}
  10%{opacity:1; transform:translateX(8px)}
  25%{opacity:.35; transform:translateX(-10px)}
  40%{opacity:1; transform:translateX(6px)}
  60%{opacity:.2; transform:translateX(-5px)}
  80%{opacity:.9; transform:translateX(2px)}
  100%{opacity:0; transform:none}
}

/* ===== Sub-layer glitch (HUD/scanlines only) ===== */
body.subglitch .scanlines{
  opacity:.95;
  filter: hue-rotate(8deg) contrast(1.15);
}
body.subglitch #coordsHUD,
body.subglitch #statusStrip{
  filter: blur(.25px) saturate(1.15) contrast(1.08);
  opacity:.55;
  transform: translateX(.5px);
}

/* ========= LOADING ========= */
#loadingScreen{
  position:fixed;
  inset:0;
  background:radial-gradient(circle at center,#0a0f18,#000);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
  transition:opacity .6s ease;
  overflow:hidden;
}
.loading-text{
  letter-spacing:6px;
  margin-bottom:20px;
  font-size:12px;
  opacity:.8;
  text-align:center;
  animation:flicker 2s infinite;
  max-width:90vw;
}
@keyframes flicker{0%,100%{opacity:.8}50%{opacity:1}}
.spinner{
  width:40px;height:40px;
  border:3px solid rgba(255,255,255,.1);
  border-top:3px solid #00d4ff;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
#enterBox{
  margin-top:34px;
  padding:18px 70px;
  border-radius:10px;
  background:rgba(10,20,35,0.6);
  border:1px solid rgba(0,200,255,0.4);
  backdrop-filter:blur(25px);
  letter-spacing:8px;
  font-weight:600;
  font-size:14px;
  color:#cfefff;
  text-shadow:0 0 8px rgba(0,200,255,0.7);
  opacity:0;
  pointer-events:none;
  transition:.4s ease;
  cursor:pointer;
  user-select:none;
}
#enterBox.show{opacity:1; pointer-events:auto;}
#enterHint{
  margin-top:12px;
  font-size:10px;
  letter-spacing:4px;
  opacity:0;
  transition:.35s ease;
  color:rgba(207,239,255,.75);
  text-shadow:0 0 10px rgba(0,200,255,.22);
  user-select:none;
}
#enterHint.show{opacity:.85;}
#enterScan{
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:0;
  z-index:0;
}
#enterScan::before{
  content:"";
  position:absolute;
  left:-40%;
  top:0;
  width:45%;
  height:100%;
  background:linear-gradient(90deg, transparent, rgba(0,200,255,.10), rgba(207,239,255,.12), rgba(0,200,255,.10), transparent);
  transform:skewX(-14deg) translateX(-120%);
  filter: blur(1px);
}
#loadingScreen.scan-on #enterScan{ opacity:1; }
#loadingScreen.scan-on #enterScan::before{ animation: enterScanPass .85s ease 1; }
@keyframes enterScanPass{
  0%{transform:skewX(-14deg) translateX(-120%); opacity:0}
  15%{opacity:1}
  100%{transform:skewX(-14deg) translateX(380%); opacity:0}
}

/* ✅ ENTER footer: canto inferior esquerdo */
#enterFooterLine{
  position:fixed;
  left:18px;
  bottom:12px;
  z-index:11;
  font-size:9px;
  letter-spacing:3px;
  opacity:.35;
  user-select:none;
  text-shadow:0 0 10px rgba(0,200,255,.10);
}
body.entered #enterFooterLine{ display:none; }

/* ========= HUDS ========= */
#coordsHUD{
  position:fixed;
  top:18px;
  right:22px;
  font-size:10px;
  letter-spacing:2px;
  opacity:.45;
  z-index:6;
  text-align:right;
  user-select:none;
}
#coordsHUD .line{opacity:.7}
#coordsHUD .blink{animation:coordsBlink 2.8s infinite}
@keyframes coordsBlink{0%,100%{opacity:.55}50%{opacity:.15}}

#statusStrip{
  position:fixed;
  left:10px;
  top:140px;
  width:min(180px, 30vw);
  z-index:6;
  opacity:.30;
  user-select:none;
  pointer-events:none;
  font-size:9px;
  letter-spacing:2px;
  line-height:1.45;
  text-shadow:0 0 10px rgba(0,200,255,.10);
  filter: drop-shadow(0 0 18px rgba(0,200,255,.10));
}
#statusStrip .statusLine{
  display:flex;
  gap:8px;
  align-items:baseline;
  padding:4px 6px;
  border-left:1px solid rgba(0,200,255,.22);
  background:linear-gradient(90deg, rgba(0,200,255,.04), transparent 70%);
}
#statusStrip .statusLine + .statusLine{ margin-top:4px; }
#statusStrip .k{opacity:.75}
#statusStrip .v{opacity:.9; color:rgba(207,239,255,.92)}
#statusStrip .faint{opacity:.6}
@media (max-width: 768px){
  #statusStrip{display:none;}
}

/* ===== Top controls ===== */
#topControls{
  position:fixed;
  top:16px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
  z-index:25;
  opacity:.92;
  transition:.18s ease;
  filter: drop-shadow(0 0 18px rgba(0,200,255,.22));
}
#topControls:hover{opacity:1}

.ctrlBtn{
  width:42px;height:34px;
  border-radius:12px;
  border:1px solid rgba(0,200,255,.72);
  background:
    radial-gradient(circle at 30% 30%, rgba(0,200,255,.10), transparent 55%),
    linear-gradient(180deg, rgba(12,24,44,.78), rgba(0,0,0,.50));
  backdrop-filter: blur(20px);
  color:rgba(207,239,255,.98);
  cursor:pointer;
  display:grid;
  place-items:center;
  font-size:14px;
  letter-spacing:2px;
  box-shadow:
    0 0 0 1px rgba(0,0,0,.25) inset,
    0 12px 34px rgba(0,0,0,.32);
  position:relative;
  overflow:hidden;
}
.ctrlBtn svg{ width:18px;height:18px; filter: drop-shadow(0 0 10px rgba(0,200,255,.25)); }
.ctrlBtn::before{
  content:"";
  position:absolute;
  inset:2px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.06);
  pointer-events:none;
}
.ctrlBtn::after{
  content:"";
  position:absolute;
  inset:-40% -30%;
  background:linear-gradient(90deg, transparent, rgba(0,200,255,.22), transparent);
  transform:rotate(12deg) translateX(-90%);
  opacity:.0;
  pointer-events:none;
}
#topControls:hover .ctrlBtn::after{
  opacity:1;
  animation:scanPass 1.05s ease infinite;
}
@keyframes scanPass{
  0%{transform:rotate(12deg) translateX(-90%);}
  100%{transform:rotate(12deg) translateX(90%);}
}
.ctrlBtn:hover{
  transform: translateY(-1px);
  box-shadow:
    0 0 0 1px rgba(0,0,0,.25) inset,
    0 16px 42px rgba(0,0,0,.38),
    0 0 26px rgba(0,200,255,.18);
}
.ctrlBtn:active{transform:translateY(1px)}
.ctrlBtn:focus-visible{
  outline:none;
  box-shadow: 0 0 0 2px rgba(0,200,255,.55), 0 16px 42px rgba(0,0,0,.38);
}

/* ===== Social control (top-right) ===== */
#socialControl{
  position:fixed;
  top:18px;
  right:22px;
  z-index:26;
  opacity:.92;
  transition:.18s ease;
  filter: drop-shadow(0 0 18px rgba(0,200,255,.18));
}
#socialControl:hover{opacity:1}
#socialControl .ctrlBtn{
  width:74px;
  height:34px;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:0 10px;
}
#socialControl .socLabel{
  font-size:9px;
  letter-spacing:3px;
  opacity:.8;
  color:rgba(207,239,255,.9);
  transform: translateY(0.5px);
}
@media (max-width: 520px){
  #socialControl .socLabel{ display:none; }
  #socialControl .ctrlBtn{ width:42px; padding:0; }
}

/* ========= VOLUME ========= */
#volumeHUD{
  position:fixed;
  top:22px;
  left:24px;
  display:flex;
  align-items:flex-start;
  gap:12px;
  z-index:20;
  opacity:.55;
  transition:.25s ease;
}
#volumeHUD:hover{ opacity:1; }
.vol-btn{
  position:relative;
  width:40px;height:40px;
  border-radius:12px;
  border:1px solid rgba(0,200,255,.45);
  background:linear-gradient(180deg, rgba(10,20,35,.65), rgba(5,10,18,.55));
  backdrop-filter: blur(18px);
  display:grid;
  place-items:center;
  cursor:pointer;
  padding:0;
  box-shadow:0 0 0 1px rgba(0,0,0,.25) inset;
}
.vol-btn::before{
  content:"";
  position:absolute; inset:-1px;
  border-radius:12px;
  background:
    radial-gradient(circle at 30% 30%, rgba(0,200,255,.18), transparent 55%),
    radial-gradient(circle at 70% 70%, rgba(207,239,255,.10), transparent 55%);
  pointer-events:none;
}
.vol-svg{width:26px;height:26px;filter:drop-shadow(0 0 10px rgba(0,200,255,.45));}
.vol-state{
  position:absolute;
  left:50%; bottom:-9px;
  transform:translateX(-50%);
  font-size:8px;
  letter-spacing:2px;
  padding:2px 6px;
  border-radius:999px;
  border:1px solid rgba(255,90,90,.45);
  background:rgba(0,0,0,.35);
  color:rgba(255,190,190,.95);
  text-shadow:0 0 8px rgba(255,90,90,.25);
  display:none; /* ✅ só aparece quando MUTED */
}
.vol-panel{
  width:0;
  opacity:0;
  pointer-events:none;
  transform:translateY(-2px);
  transition:.25s ease;
  padding:10px 0;
  border-radius:14px;
  border:1px solid rgba(0,200,255,.35);
  background:
    linear-gradient(180deg, rgba(10,20,35,.72), rgba(0,0,0,.55)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.05) 0 1px, transparent 1px 10px);
  backdrop-filter: blur(22px);
  box-shadow: 0 12px 40px rgba(0,0,0,.45);
  overflow:hidden;
}
#volumeHUD:hover .vol-panel,
#volumeHUD.open .vol-panel{
  width:240px;
  opacity:1;
  pointer-events:auto;
  padding:10px 12px;
}
.vol-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;}
.vol-title{font-size:9px;letter-spacing:3px;opacity:.75;}
.vol-readout{font-size:10px;letter-spacing:2px;color:#cfefff;text-shadow:0 0 10px rgba(0,200,255,.35);}
#volSlider{
  width:100%;
  height:26px;
  background:transparent;
  appearance:none;
  -webkit-appearance:none;
  cursor:pointer;
}
#volSlider::-webkit-slider-runnable-track{
  height:6px;border-radius:999px;
  background:
    linear-gradient(90deg, rgba(0,200,255,.95), rgba(0,200,255,.25)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.14) 0 1px, transparent 1px 8px);
  box-shadow:0 0 18px rgba(0,200,255,.18);
  border:1px solid rgba(0,200,255,.25);
}
#volSlider::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:16px;height:16px;border-radius:6px;
  margin-top:-6px;
  background: radial-gradient(circle at 30% 30%, rgba(207,239,255,1), rgba(0,200,255,.55));
  border:1px solid rgba(0,200,255,.65);
  box-shadow:0 0 18px rgba(0,200,255,.55);
}
#volSlider::-moz-range-track{
  height:6px;border-radius:999px;
  background:
    linear-gradient(90deg, rgba(0,200,255,.95), rgba(0,200,255,.25)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.14) 0 1px, transparent 1px 8px);
  border:1px solid rgba(0,200,255,.25);
}
#volSlider::-moz-range-thumb{
  width:16px;height:16px;border-radius:6px;
  background: radial-gradient(circle at 30% 30%, rgba(207,239,255,1), rgba(0,200,255,.55));
  border:1px solid rgba(0,200,255,.65);
  box-shadow:0 0 18px rgba(0,200,255,.55);
}
.vol-footer{
  margin-top:8px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-size:9px;
  letter-spacing:3px;
  opacity:.65;
}
.vol-bars{
  width:70px;
  height:10px;
  border-radius:6px;
  background:repeating-linear-gradient(90deg, rgba(0,200,255,var(--bars-a,.55)) 0 6px, transparent 6px 10px);
  filter: drop-shadow(0 0 10px rgba(0,200,255,.25));
  clip-path: inset(0 calc(100% - var(--bars-w,50%)) 0 0 round 6px);
  transition: clip-path .08s linear;
}

/* ========= TERMINAL / CATALOG / CHANNELS (mesmo do anterior) ========= */
#terminal, #catalog, #channels, #admin{
  position:fixed; inset:0;
  display:none;
  background:rgba(0,0,0,.62);
  backdrop-filter: blur(18px);
}
#terminal{ z-index:30; }
#catalog{ z-index:29; }
#channels{ z-index:28; background:rgba(0,0,0,.58); backdrop-filter: blur(16px); }
#admin{ z-index:27; }

#terminal.show, #catalog.show, #channels.show, #admin.show{ display:block; }

/* ========= ADMIN ========= */
.adminBox{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:min(980px, calc(100vw - 48px));
  border-radius:16px;
  border:1px solid rgba(0,200,255,.30);
  background:linear-gradient(180deg, rgba(10,20,35,.72), rgba(0,0,0,.58));
  box-shadow:0 18px 60px rgba(0,0,0,.55);
  overflow:hidden;
}
.adminHeader{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 12px;
  font-size:10px;
  letter-spacing:3px;
  opacity:.85;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.adminHeader .dim{opacity:.55}
.adminBody{ padding:14px; }

.adminGridTop{
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
}
.adminField{
  border-radius:14px;
  border:1px solid rgba(0,200,255,.22);
  background:
    radial-gradient(circle at 30% 20%, rgba(0,200,255,.08), transparent 55%),
    linear-gradient(180deg, rgba(0,0,0,.20), rgba(0,0,0,.35));
  box-shadow:0 0 0 1px rgba(0,0,0,.25) inset;
  padding:12px;
}
.adminLabel{
  font-size:9px;
  letter-spacing:3px;
  opacity:.55;
  margin-bottom:8px;
}
.adminValue{
  font-size:14px;
  letter-spacing:2px;
  opacity:.92;
}
.adminInput{
  width:100%;
  height:40px;
  border-radius:12px;
  border:1px solid rgba(0,200,255,.25);
  background:rgba(0,0,0,.35);
  color:rgba(207,239,255,.95);
  padding:0 12px;
  font-family:'Orbitron', sans-serif;
  letter-spacing:1px;
  font-size:12px;
  outline:none;
  box-shadow:0 0 0 1px rgba(0,0,0,.25) inset;
}
.adminInput::placeholder{ color:rgba(207,239,255,.45); }

.adminActions{
  margin-top:12px;
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.aBtn{
  height:34px;
  padding:0 14px;
  border-radius:12px;
  border:1px solid rgba(0,200,255,.42);
  background:linear-gradient(180deg, rgba(12,24,44,.70), rgba(0,0,0,.45));
  color:rgba(207,239,255,.95);
  cursor:pointer;
  letter-spacing:3px;
  font-size:10px;
  box-shadow:0 0 0 1px rgba(0,0,0,.25) inset;
}
.aBtn:hover{ box-shadow:0 0 0 1px rgba(0,0,0,.25) inset, 0 0 20px rgba(0,200,255,.10); }
.aBtn:active{ transform: translateY(1px); }

.aPill{
  font-size:10px;
  letter-spacing:2px;
  opacity:.8;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.22);
}
.aPill.ok{
  border-color: rgba(0,200,255,.25);
  color: rgba(207,239,255,.92);
}
.aPill.bad{
  border-color: rgba(255,90,90,.35);
  color: rgba(255,190,190,.95);
}

/* ✅ Conteúdo secreto (stats) escondido até autenticar */
.adminSecret{
  display:none;
}
#admin.unlocked .adminSecret{
  display:block;
}

/* stats / danger */
.adminStats{
  margin-top:14px;
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap:12px;
}
@media (max-width: 900px){
  .adminStats{ grid-template-columns:1fr; }
}
.statCard{
  border-radius:14px;
  border:1px solid rgba(0,200,255,.18);
  background:linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.36));
  padding:12px;
  box-shadow:0 0 0 1px rgba(0,0,0,.25) inset;
}
.statTitle{
  font-size:9px;
  letter-spacing:3px;
  opacity:.55;
  margin-bottom:8px;
}
.statVal{
  font-size:22px;
  letter-spacing:2px;
  opacity:.95;
}
.statSmall{
  font-size:12px;
  opacity:.85;
  letter-spacing:2px;
}
.adminFooter{
  margin-top:12px;
  opacity:.55;
  font-size:9px;
  letter-spacing:2px;
  line-height:1.45;
}
.adminDangerRow{
  margin-top:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.aBtn.danger{
  border-color: rgba(255,90,90,.45);
  color: rgba(255,200,200,.95);
}
.aBtn.danger:hover{
  box-shadow:0 0 0 1px rgba(0,0,0,.25) inset, 0 0 22px rgba(255,90,90,.10);
}

/* glitch no nome */
.glitchName{
  display:inline-block;
}
.glitchName.on{
  animation: nameGlitch .55s steps(6) 1;
  text-shadow:
    -1px 0 rgba(255,90,90,.55),
     1px 0 rgba(0,200,255,.55),
     0 0 14px rgba(0,200,255,.15);
}
@keyframes nameGlitch{
  0%{transform:translateX(0); filter:none;}
  20%{transform:translateX(2px); filter:hue-rotate(8deg);}
  40%{transform:translateX(-2px); filter:contrast(1.15);}
  60%{transform:translateX(1px); filter:saturate(1.2);}
  80%{transform:translateX(-1px); filter:hue-rotate(-8deg);}
  100%{transform:none; filter:none;}
}

/* ===== Bottom right version (sempre visível) ===== */
#versionTag{
  position:fixed;
  right:18px;
  bottom:12px;
  z-index:6;
  font-size:9px;
  letter-spacing:3px;
  opacity:.35;
  user-select:none;
  text-shadow:0 0 10px rgba(0,200,255,.10);
}
#versionTag .v{opacity:.85;color:rgba(207,239,255,.85);}

/* reduced motion */
@media (prefers-reduced-motion: reduce){
  .scanlines{opacity:.35}
  .spinner{animation:none}
  #cinemaFX::before{animation:none}
  #loadingScreen.scan-on #enterScan::before{animation:none !important;}
}
@media (max-width: 768px){
  :root{ --blur-amount: 55px; }
}
</style>
</head>

<body>

<video id="videoBlur" playsinline preload="auto" muted loop>
  <source src="https://files.catbox.moe/um6f2u.mp4" type="video/mp4" />
</video>

<video id="video" playsinline preload="auto" loop>
  <source src="https://files.catbox.moe/um6f2u.mp4" type="video/mp4" />
</video>

<audio id="ambience" preload="auto" loop>
  <source src="https://files.catbox.moe/3q1h1x.mp3" type="audio/mpeg">
</audio>

<div class="scanlines"></div>
<div id="cinemaFX"></div>
<div id="glitchFlash"></div>

<!-- ✅ versão sempre -->
<div id="versionTag"><span class="v">dottore lab interface: v4</span></div>

<div id="loadingScreen">
  <div id="enterScan" aria-hidden="true"></div>
  <div class="loading-text" id="dynamicText">INITIALIZING EXPERIMENT...</div>
  <div class="spinner" id="spinner"></div>

  <div id="enterBox">ENTER</div>
  <div id="enterHint">PRESS [ENTER] TO PROCEED</div>
</div>

<!-- ✅ ENTER frase no canto inferior esquerdo -->
<div id="enterFooterLine">NEURAL LINK ESTABLISHED // SUBJECT ONLINE</div>

<div id="coordsHUD">
  <div class="line blink" id="coordA">COORD: --.---- / --.----</div>
  <div class="line" id="coordB">NODE: Σ-07 // LINK: STABLE</div>
</div>

<div id="statusStrip" aria-hidden="true">
  <div class="statusLine" id="ss1"><span class="k">STRIP</span> <span class="v">IDLE</span></div>
  <div class="statusLine faint" id="ss2"><span class="k">FEED</span> <span class="v">STANDBY</span></div>
  <div class="statusLine faint" id="ss3"><span class="k">TRACE</span> <span class="v">—</span></div>
</div>

<div id="topControls">
  <button class="ctrlBtn" id="btnFS" title="Tela cheia">⛶</button>
  <button class="ctrlBtn" id="btnCat" title="Catálogo">≡</button>
  <button class="ctrlBtn" id="btnTerm" title="Painel">⌁</button>

  <button class="ctrlBtn" id="btnAdmin" title="Admin Console" aria-label="Abrir console admin">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 2 20 6v6c0 5-3.4 9.4-8 10-4.6-.6-8-5-8-10V6l8-4Z" fill="none" stroke="rgba(0,200,255,.85)" stroke-width="1.6"/>
      <path d="M12 10a2 2 0 1 0-2 2v3h4v-3a2 2 0 0 0-2-2Z" fill="rgba(207,239,255,.92)"/>
    </svg>
  </button>
</div>

<!-- ✅ Redes sociais -->
<div id="socialControl" aria-label="Redes sociais">
  <button class="ctrlBtn" id="btnLinks" type="button" title="Redes" aria-label="Abrir redes sociais">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M16 8a3 3 0 1 0-2.8-4" fill="none" stroke="rgba(0,200,255,.85)" stroke-width="1.7" stroke-linecap="round"/>
      <path d="M8 13a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z" fill="none" stroke="rgba(0,200,255,.75)" stroke-width="1.7"/>
      <path d="M18 14a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z" fill="none" stroke="rgba(0,200,255,.55)" stroke-width="1.7"/>
      <path d="M10.6 14.2 14.8 11.8" fill="none" stroke="rgba(207,239,255,.95)" stroke-width="1.7" stroke-linecap="round"/>
      <path d="M10.7 17.3 15.1 18.2" fill="none" stroke="rgba(207,239,255,.85)" stroke-width="1.7" stroke-linecap="round"/>
      <path d="M14.9 9.2 10.3 12.7" fill="none" stroke="rgba(207,239,255,.75)" stroke-width="1.7" stroke-linecap="round"/>
    </svg>
    <span class="socLabel">REDES</span>
  </button>
</div>

<div id="volumeHUD" class="vol" aria-label="Controle de volume" style="--bars-w:50%; --bars-a:.55;">
  <button id="volIconBtn" class="vol-btn" type="button" aria-label="Abrir controle de volume">
    <svg class="vol-svg" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M3 10v4a2 2 0 0 0 2 2h3l5 4V4L8 8H5a2 2 0 0 0-2 2Z"
            fill="none" stroke="rgba(207,239,255,.95)" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M16 9c1 .8 1.5 1.8 1.5 3S17 14.2 16 15"
            fill="none" stroke="rgba(0,200,255,.75)" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M18.5 7c1.6 1.4 2.5 3 2.5 5s-.9 3.6-2.5 5"
            fill="none" stroke="rgba(0,200,255,.45)" stroke-width="1.6" stroke-linecap="round"/>
    </svg>
    <span id="volState" class="vol-state">MUTED</span>
  </button>

  <div id="volPanel" class="vol-panel" role="group" aria-label="Ajuste de volume">
    <div class="vol-top">
      <div class="vol-title">AUDIO // MIX</div>
      <div id="volReadout" class="vol-readout">70%</div>
    </div>
    <input type="range" id="volSlider" min="0" max="1" step="0.01" value="0.7" />
    <div class="vol-footer">
      <span>OUTPUT</span>
      <span class="vol-bars" aria-hidden="true"></span>
    </div>
  </div>
</div>

<!-- ========= CHANNELS ========= -->
<div id="channels" aria-hidden="true">
  <div class="adminBox" style="width:min(1040px, calc(100vw - 48px));">
    <div class="adminHeader">
      <div>OUTBOUND ROUTING // SOCIAL ACCESS</div>
      <div class="dim">ESC para fechar</div>
    </div>
    <div class="adminBody" style="display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:16px;">
      <a class="adminField" style="text-decoration:none;color:inherit; display:block;"
         href="https://discord.gg/example" target="_blank" rel="noopener noreferrer">
        <div class="adminLabel">DISCORD</div>
        <div class="adminValue">JOIN CHANNEL</div>
      </a>
      <a class="adminField" style="text-decoration:none;color:inherit; display:block;"
         href="https://instagram.com/example" target="_blank" rel="noopener noreferrer">
        <div class="adminLabel">INSTAGRAM</div>
        <div class="adminValue">OPEN PROFILE</div>
      </a>
    </div>
  </div>
</div>

<!-- ========= ADMIN ========= -->
<div id="admin" aria-hidden="true">
  <div class="adminBox">
    <div class="adminHeader">
      <div>ADMIN CONSOLE // AUTH REQUIRED</div>
      <div class="dim">ESC para fechar</div>
    </div>

    <div class="adminBody">
      <!-- LOGIN ONLY -->
      <div class="adminGridTop">
        <div class="adminField">
          <div class="adminLabel">USER</div>
          <div class="adminValue">Dottore</div>
        </div>

        <div class="adminField">
          <div class="adminLabel">PASS</div>
          <input id="adminPass" class="adminInput" type="password" autocomplete="off" spellcheck="false" placeholder="•••••••••" />
        </div>
      </div>

      <div class="adminActions">
        <button class="aBtn" id="adminAuth">ACESSAR</button>
        <button class="aBtn" id="adminClear">LIMPAR</button>
        <div id="adminStatus" class="aPill">Aguardando autenticação…</div>
      </div>

      <!-- ✅ SECRET (só após autenticar) -->
      <div class="adminSecret">
        <div class="adminStats">
          <div class="statCard">
            <div class="statTitle">VIEWS // ENTER</div>
            <div class="statVal" id="mViews">0</div>
          </div>
          <div class="statCard">
            <div class="statTitle">UNIQUE // DEVICE</div>
            <div class="statVal" id="mUnique">0</div>
          </div>
          <div class="statCard">
            <div class="statTitle">LAST ACCESS</div>
            <div class="statVal statSmall" id="mLast">—</div>
          </div>
        </div>

        <div class="adminDangerRow">
          <button class="aBtn danger" id="adminReset">RESET METRICS</button>
          <button class="aBtn" id="adminLock">LOCK</button>
        </div>

        <div class="adminFooter">
          Nota: métricas são locais (neste navegador/dispositivo). Sem backend, não existe contagem global real.
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ========= TERMINAL / CATALOG (mantidos simples aqui) ========= -->
<div id="terminal" aria-hidden="true">
  <div class="adminBox" style="left:24px; top:auto; bottom:24px; transform:none; width:min(720px, calc(100vw - 48px));">
    <div class="adminHeader">
      <div>LAB TERMINAL // ACCESS: GRANTED</div>
      <div class="dim">ESC para fechar</div>
    </div>
    <div class="adminBody">
      <div id="termLog" style="max-height:min(46vh, 420px); overflow:auto; font-size:11px; line-height:1.55; letter-spacing:1px; opacity:.9;"></div>
      <div style="display:flex; gap:10px; align-items:center; margin-top:10px;">
        <div id="termPrompt" style="font-size:10px; letter-spacing:2px; opacity:.75; white-space:nowrap;">root@lab:~$</div>
        <input id="termInput" class="adminInput" style="height:32px" type="text" autocomplete="off" spellcheck="false" placeholder="Digite um comando (ex: help)" />
        <div id="termHint" style="font-size:9px; letter-spacing:2px; opacity:.55; white-space:nowrap;">ENTER</div>
      </div>
    </div>
  </div>
</div>

<div id="catalog" aria-hidden="true">
  <div class="adminBox" style="right:24px; left:auto; top:auto; bottom:24px; transform:none; width:min(860px, calc(100vw - 48px));">
    <div class="adminHeader">
      <div>EXPERIMENT CATALOG // INDEX: Σ</div>
      <div class="dim">ESC para fechar</div>
    </div>
    <div class="adminBody">
      <div style="opacity:.65; letter-spacing:2px; font-size:10px;">
        (Catálogo mantido — não mexi nele nesta revisão)
      </div>
    </div>
  </div>
</div>

<script>
/* ===== ELEMENTS ===== */
const video = document.getElementById("video");
const videoBlur = document.getElementById("videoBlur");
const ambience = document.getElementById("ambience");

const enterBox = document.getElementById("enterBox");
const enterHint = document.getElementById("enterHint");
const loadingScreen = document.getElementById("loadingScreen");
const dynamicText = document.getElementById("dynamicText");
const spinner = document.getElementById("spinner");

const coordA = document.getElementById("coordA");
const coordB = document.getElementById("coordB");

const btnFS = document.getElementById("btnFS");
const btnTerm = document.getElementById("btnTerm");
const btnCat  = document.getElementById("btnCat");
const btnLinks = document.getElementById("btnLinks");
const btnAdmin = document.getElementById("btnAdmin");

const volumeHUD = document.getElementById("volumeHUD");
const volSlider = document.getElementById("volSlider");
const volIconBtn = document.getElementById("volIconBtn");
const volReadout = document.getElementById("volReadout");
const volState = document.getElementById("volState");

const terminal = document.getElementById("terminal");
const termLog = document.getElementById("termLog");
const termInput = document.getElementById("termInput");
const termPrompt = document.getElementById("termPrompt");
const termHint = document.getElementById("termHint");

const catalog = document.getElementById("catalog");
const channels = document.getElementById("channels");

const ss2 = document.getElementById("ss2");
const ss3 = document.getElementById("ss3");

/* Admin */
const admin = document.getElementById("admin");
const adminPass = document.getElementById("adminPass");
const adminAuth = document.getElementById("adminAuth");
const adminClear = document.getElementById("adminClear");
const adminStatus = document.getElementById("adminStatus");
const adminReset = document.getElementById("adminReset");
const adminLock = document.getElementById("adminLock");
const mViews = document.getElementById("mViews");
const mUnique = document.getElementById("mUnique");
const mLast = document.getElementById("mLast");

/* ===== LOADING TEXT ===== */
const messages = [
  "INITIALIZING EXPERIMENT...",
  "STABILIZING MEMORY FRAGMENTS...",
  "NEURAL PATHWAYS SYNCHRONIZED...",
  "ETHICS MODULE DISABLED...",
  "SUBJECT AWARENESS: IRRELEVANT",
  "PROCEEDING WITHOUT CONSENT..."
];
let msgIndex = 0;
const msgTimer = setInterval(() => {
  msgIndex = (msgIndex + 1) % messages.length;
  dynamicText.textContent = messages[msgIndex];
}, 2200);

let hasEntered = false;

/* ===== READY / SAFETY ===== */
let readyToEnter = false;

function showEnter(label="ENTER"){
  enterBox.style.pointerEvents = "auto";
  enterBox.textContent = label;
  enterBox.classList.add("show");
  enterHint.textContent = (label === "RETRY") ? "PRESS [ENTER] TO RETRY" : "PRESS [ENTER] TO PROCEED";
  enterHint.classList.add("show");
}
function markReady(){
  if (readyToEnter) return;
  readyToEnter = true;
  showEnter("ENTER");
}

setTimeout(() => { if (!enterBox.classList.contains("show")) showEnter("ENTER"); }, 2500);

video.addEventListener("loadeddata", markReady, { once:true });
video.addEventListener("canplay", markReady, { once:true });

function onVideoError(){
  spinner.style.display = "none";
  dynamicText.textContent = "ERROR // DATA CORRUPTED // TAP TO RETRY";
  showEnter("RETRY");
}
video.addEventListener("error", onVideoError);
videoBlur.addEventListener("error", onVideoError);

/* ===== COORDS ===== */
function rndCoord(){
  const a = (Math.random()*180 - 90).toFixed(4);
  const b = (Math.random()*360 - 180).toFixed(4);
  coordA.textContent = `COORD: ${a} / ${b}`;
  coordB.textContent = `NODE: Σ-${Math.floor(1+Math.random()*99).toString().padStart(2,"0")} // LINK: ${Math.random()>.15?"STABLE":"DEGRADED"}`;
}
setInterval(rndCoord, 2200);
rndCoord();

/* ===== FULLSCREEN ===== */
async function toggleFullscreen(){
  try{
    if (!document.fullscreenElement) await document.documentElement.requestFullscreen();
    else await document.exitFullscreen();
  } catch(e){}
}
btnFS.addEventListener("click", toggleFullscreen);

/* ===== VOLUME UI ===== */
video.volume = 0.7;
volSlider.value = String(video.volume);

function updateVolumeUI(){
  const pct = Math.round(Number(video.volume) * 100);
  volReadout.textContent = pct + "%";
  volumeHUD.style.setProperty("--bars-w", Math.max(6, pct) + "%");
  volumeHUD.style.setProperty("--bars-a", String(0.25 + (pct/100) * 0.55));

  // ✅ tira LIVE: só mostra MUTED quando pct === 0
  if (pct === 0) {
    volState.style.display = "inline-block";
  } else {
    volState.style.display = "none";
  }

  ambience.volume = Math.min(0.35, Math.max(0.02, Number(video.volume) * 0.25));
}
volSlider.addEventListener("input", () => {
  video.volume = Number(volSlider.value);
  updateVolumeUI();
});
updateVolumeUI();

volIconBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  volumeHUD.classList.toggle("open");
});
document.addEventListener("click", () => volumeHUD.classList.remove("open"));

/* ===== overlays open/close ===== */
function closeCatalog(){
  if (!catalog.classList.contains("show")) return;
  catalog.classList.remove("show");
  catalog.setAttribute("aria-hidden","true");
}
function closeChannels(){
  if (!channels.classList.contains("show")) return;
  channels.classList.remove("show");
  channels.setAttribute("aria-hidden","true");
}
function closeAdmin(){
  if (!admin.classList.contains("show")) return;
  admin.classList.remove("show");
  admin.setAttribute("aria-hidden","true");
}
function closeTerminal(){
  if (!terminal.classList.contains("show")) return;
  terminal.classList.remove("show");
  terminal.setAttribute("aria-hidden","true");
}

function openTerminal(){
  closeCatalog(); closeChannels(); closeAdmin();
  terminal.classList.add("show");
  terminal.setAttribute("aria-hidden","false");
}
btnTerm.addEventListener("click", (e) => {
  e.stopPropagation();
  if (terminal.classList.contains("show")) closeTerminal();
  else openTerminal();
});
function openCatalog(){
  closeTerminal(); closeChannels(); closeAdmin();
  catalog.classList.add("show");
  catalog.setAttribute("aria-hidden","false");
}
btnCat.addEventListener("click", (e) => {
  e.stopPropagation();
  if (catalog.classList.contains("show")) closeCatalog();
  else openCatalog();
});
function openChannels(){
  closeTerminal(); closeCatalog(); closeAdmin();
  channels.classList.add("show");
  channels.setAttribute("aria-hidden","false");
}
btnLinks.addEventListener("click", (e) => {
  e.stopPropagation();
  if (channels.classList.contains("show")) closeChannels();
  else openChannels();
});
channels.addEventListener("click", (e) => {
  if (e.target === channels) closeChannels();
});
function openAdmin(){
  closeTerminal(); closeCatalog(); closeChannels();
  admin.classList.add("show");
  admin.setAttribute("aria-hidden","false");
  adminPass.focus({preventScroll:true});
}
btnAdmin.addEventListener("click", (e) => {
  e.stopPropagation();
  if (admin.classList.contains("show")) closeAdmin();
  else openAdmin();
});
admin.addEventListener("click", (e) => {
  if (e.target === admin) closeAdmin();
});

/* ===== keyboard ESC ===== */
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape"){
    if (terminal.classList.contains("show")) { closeTerminal(); return; }
    if (catalog.classList.contains("show")) { closeCatalog(); return; }
    if (channels.classList.contains("show")) { closeChannels(); return; }
    if (admin.classList.contains("show")) { closeAdmin(); return; }
  }
});

/* ===== Admin metrics (local) ===== */
const LS = {
  views: "dli_views_v4",
  device: "dli_device_v4",
  last: "dli_admin_last_v4"
};

function nowStamp(){
  const d = new Date();
  const yyyy = d.getFullYear();
  const mm = String(d.getMonth()+1).padStart(2,"0");
  const dd = String(d.getDate()).padStart(2,"0");
  const hh = String(d.getHours()).padStart(2,"0");
  const mi = String(d.getMinutes()).padStart(2,"0");
  const ss = String(d.getSeconds()).padStart(2,"0");
  return `${yyyy}-${mm}-${dd}\n${hh}:${mi}:${ss}`;
}
function getViews(){ return Number(localStorage.getItem(LS.views) || "0"); }
function setViews(n){ localStorage.setItem(LS.views, String(n)); }
function ensureDevice(){
  let id = localStorage.getItem(LS.device);
  if (!id){
    id = "DEV-" + Math.random().toString(16).slice(2,10).toUpperCase();
    localStorage.setItem(LS.device, id);
  }
  return id;
}
function getLast(){ return localStorage.getItem(LS.last) || "—"; }
function setLast(v){ localStorage.setItem(LS.last, v); }

function refreshAdminUI(){
  mViews.textContent = String(getViews());
  mUnique.textContent = localStorage.getItem(LS.device) ? "1" : "0";
  mLast.textContent = getLast();
}

let adminUnlocked = false;

function setAdminStatus(text, mode){
  adminStatus.classList.remove("ok","bad");
  adminStatus.textContent = text;
  if (mode === "ok") adminStatus.classList.add("ok");
  if (mode === "bad") adminStatus.classList.add("bad");
}

function doNameGlitch(){
  const span = adminStatus.querySelector(".glitchName");
  if (!span) return;
  span.classList.remove("on");
  void span.offsetWidth;
  span.classList.add("on");
  setTimeout(()=>span.classList.remove("on"), 650);
}

function tryAuth(){
  const pass = (adminPass.value || "").trim();
  if (pass !== "Projeto26"){
    adminUnlocked = false;
    admin.classList.remove("unlocked");           // ✅ garante LOCKED
    setAdminStatus("Senha incorreta.", "bad");
    return;
  }

  adminUnlocked = true;
  admin.classList.add("unlocked");               // ✅ libera stats
  ensureDevice();
  setLast(nowStamp());
  refreshAdminUI();

  adminStatus.innerHTML = `Bem-vindo ao Painel, <span class="glitchName">Dottore</span>`;
  adminStatus.classList.remove("bad");
  adminStatus.classList.add("ok");
  doNameGlitch();
}
adminAuth.addEventListener("click", tryAuth);
adminPass.addEventListener("keydown", (e) => {
  if (e.key === "Enter") tryAuth();
});

adminClear.addEventListener("click", () => {
  adminPass.value = "";
  adminPass.focus({preventScroll:true});
});

adminReset?.addEventListener("click", () => {
  if (!adminUnlocked) return;
  localStorage.removeItem(LS.views);
  localStorage.removeItem(LS.device);
  localStorage.removeItem(LS.last);
  adminUnlocked = false;
  admin.classList.remove("unlocked");
  ensureDevice();
  refreshAdminUI();
  setAdminStatus("Métricas resetadas.", "ok");
});

adminLock?.addEventListener("click", () => {
  adminUnlocked = false;
  admin.classList.remove("unlocked");
  adminPass.value = "";
  setAdminStatus("Sessão bloqueada.");
});

/* ===== ENTER / RETRY ===== */
function hideLoading(){
  loadingScreen.style.opacity = "0";
  setTimeout(() => loadingScreen.style.display = "none", 600);
  clearInterval(msgTimer);
  document.body.classList.add("entered");
}

enterBox.onclick = async () => {
  enterBox.style.pointerEvents = "none";

  if (enterBox.textContent === "RETRY") {
    spinner.style.display = "";
    dynamicText.textContent = "RECALIBRANDO STREAM...";
    enterBox.classList.remove("show");
    enterHint.classList.remove("show");
    readyToEnter = false;

    try { video.load(); videoBlur.load(); ambience.load(); } catch(e){}
    setTimeout(() => { showEnter("ENTER"); enterBox.style.pointerEvents = "auto"; }, 300);
    return;
  }

  try {
    video.muted = false;
    await video.play();
    videoBlur.play().catch(()=>{});
    ambience.play().catch(()=>{});

    hasEntered = true;

    // conta VIEW só depois do ENTER
    setViews(getViews() + 1);

    hideLoading();
    updateVolumeUI();
  } catch (err) {
    spinner.style.display = "none";
    dynamicText.textContent = "REPRODUÇÃO BLOQUEADA // CLIQUE NOVAMENTE";
    showEnter("ENTER");
  } finally {
    if (loadingScreen.style.display !== "none") {
      enterBox.style.pointerEvents = "auto";
    }
  }
};

/* ENTER do teclado (somente quando loading está visível) */
document.addEventListener("keydown", (e) => {
  if (e.key !== "Enter") return;

  // não disparar se estiver digitando em input
  const a = document.activeElement;
  const isTypingField = a && (a.tagName === "INPUT" || a.tagName === "TEXTAREA" || a.isContentEditable);
  if (isTypingField) return;

  const loadingVisible = loadingScreen.style.display !== "none" && getComputedStyle(loadingScreen).display !== "none";
  if (!loadingVisible) return;

  if (enterBox.classList.contains("show") && enterBox.style.pointerEvents !== "none") {
    enterBox.click();
  }
});

ensureDevice();
refreshAdminUI();
</script>

</body>
</html>
