<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Shadow Temple Interface</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter:wght@400;500&display=swap" rel="stylesheet" />

<style>
:root{
  --ink:#06070a;
  --coal:#0b0d12;
  --txt: rgba(245,248,255,.92);
  --dim: rgba(245,248,255,.62);

  --gold: rgba(205,170,90,.72);
  --gold2: rgba(205,170,90,.22);
  --line: rgba(255,255,255,.08);

  --blur-amount: 32px;
}

*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;}
body{
  background:var(--ink);
  overflow:hidden;
  color:var(--txt);
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* ========= VIDEO ========= */
#videoBlur{
  position:fixed;
  inset:-20%;
  width:140%;
  height:140%;
  object-fit:cover;
  filter: blur(var(--blur-amount)) brightness(.55) saturate(1.05) contrast(1.06);
  transform: translateZ(0);
  z-index:-5;
}

#video{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-4;
  background:black;
}

/* ========= FX ========= */
.scanlines{
  position:fixed;
  inset:0;
  background:repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.02),
    rgba(255,255,255,0.02) 1px,
    transparent 1px,
    transparent 4px
  );
  pointer-events:none;
  z-index:3;
  mix-blend-mode:overlay;
  opacity:.55;
}

#cinemaFX{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:4;
}
#cinemaFX::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 50% 48%, transparent 0 62%, rgba(0,0,0,.45) 82%, rgba(0,0,0,.75) 100%);
  opacity:.55;
}

/* ========= LOADING (PORTÃO / SELO) ========= */
#loadingScreen{
  position:fixed;
  inset:0;
  z-index:50;
  display:flex;
  align-items:center;
  justify-content:center;
  background: radial-gradient(circle at 50% 45%, rgba(255,255,255,.05), rgba(0,0,0,.95));
  overflow:hidden;
  transition: opacity .6s ease, transform .6s ease;
}

.loadingWrap{
  width:min(860px, calc(100vw - 56px));
  height:min(520px, calc(100vh - 56px));
  border-radius:18px;
  border:1px solid rgba(205,170,90,.16);
  background:
    radial-gradient(circle at 30% 20%, rgba(205,170,90,.06), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.28));
  box-shadow: 0 24px 92px rgba(0,0,0,.72);
  position:relative;
  overflow:hidden;
}

.loadingWrap::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(90deg, rgba(0,0,0,.35), transparent 18%, transparent 82%, rgba(0,0,0,.35)),
    repeating-linear-gradient(0deg, rgba(255,255,255,.025) 0 1px, transparent 1px 6px);
  opacity:.9;
  pointer-events:none;
}

.gateSplit{
  position:absolute;
  inset:0;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:0;
  pointer-events:none;
}
.gateSplit > div{
  border-right:1px solid rgba(205,170,90,.08);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.18));
}
.gateSplit > div:last-child{ border-right:none; }

.loadingCenter{
  position:absolute;
  left:50%;
  top:52%;
  transform:translate(-50%,-50%);
  text-align:center;
  width:min(520px, 92%);
}

.loadingTitle{
  font-family:Cinzel, serif;
  font-size:11px;
  letter-spacing:6px;
  opacity:.85;
  text-shadow: 0 0 22px rgba(205,170,90,.10);
  margin-bottom:14px;
}

.sigilBtn{
  display:inline-grid;
  place-items:center;
  width:160px;
  height:160px;
  border-radius:999px;
  border:1px solid rgba(205,170,90,.22);
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(circle at 50% 55%, rgba(205,170,90,.10), transparent 62%);
  box-shadow:
    0 0 0 1px rgba(0,0,0,.35) inset,
    0 22px 62px rgba(0,0,0,.55);
  cursor:pointer;
  user-select:none;
  position:relative;
  overflow:hidden;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.sigilBtn:hover{
  transform: translateY(-2px) scale(1.01);
  border-color: rgba(205,170,90,.32);
  box-shadow:
    0 0 0 1px rgba(0,0,0,.35) inset,
    0 28px 74px rgba(0,0,0,.62),
    0 0 34px rgba(205,170,90,.10);
}
.sigilBtn:active{ transform: translateY(0px) scale(.99); }

.sigilBtn::after{
  content:"";
  position:absolute;
  inset:-40% -40%;
  background: conic-gradient(from 0deg, transparent 0 20%, rgba(205,170,90,.12), transparent 45% 100%);
  animation: sigilSweep 2.8s linear infinite;
  opacity:.75;
  filter: blur(.2px);
}
@keyframes sigilSweep{
  to{ transform: rotate(360deg); }
}

.sigilImg{
  width:92px;
  height:92px;
  object-fit:contain;
  filter: drop-shadow(0 0 16px rgba(205,170,90,.18));
  z-index:2;
}

.sigilHint{
  margin-top:16px;
  font-family:Cinzel, serif;
  font-size:9px;
  letter-spacing:4px;
  opacity:.72;
}

.sigilHint2{
  margin-top:8px;
  font-size:9px;
  letter-spacing:3px;
  opacity:.45;
  font-family:Cinzel, serif;
}

.loadingFooter{
  position:absolute;
  left:18px;
  bottom:14px;
  font-family:Cinzel, serif;
  font-size:9px;
  letter-spacing:3px;
  opacity:.32;
}

.loadingFooterR{
  position:absolute;
  right:18px;
  bottom:14px;
  font-family:Cinzel, serif;
  font-size:9px;
  letter-spacing:3px;
  opacity:.30;
}

/* animação de abrir portões */
body.entering #loadingScreen{ pointer-events:none; }
body.entering .loadingWrap{
  animation: gatePulse .55s ease 1;
}
@keyframes gatePulse{
  0%{ transform:translateZ(0) scale(1); }
  45%{ transform:translateZ(0) scale(1.012); }
  100%{ transform:translateZ(0) scale(1); }
}
body.entered #loadingScreen{
  opacity:0;
  transform: scale(1.03);
  pointer-events:none;
}

/* ========= HUD (top controls mínimos) ========= */
#topControls{
  position:fixed;
  top:16px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  z-index:25;
  opacity:.92;
  filter: drop-shadow(0 0 18px rgba(205,170,90,.10));
  transition:.18s ease;
}
#topControls:hover{opacity:1}

.ctrlBtn{
  width:44px;height:36px;
  border-radius:14px;
  border:1px solid rgba(205,170,90,.20);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.05), transparent 58%),
    linear-gradient(180deg, rgba(10,12,16,.72), rgba(0,0,0,.55));
  backdrop-filter: blur(16px);
  cursor:pointer;
  display:grid;
  place-items:center;
  box-shadow: 0 0 0 1px rgba(0,0,0,.32) inset, 0 14px 38px rgba(0,0,0,.36);
  color:rgba(245,248,255,.92);
}
.ctrlBtn svg{ width:18px;height:18px; opacity:.92; }

/* VOLUME top-left (volta!) */
#volumeHUD{
  position:fixed;
  top:16px;
  left:18px;
  z-index:26;
  display:flex;
  gap:10px;
  align-items:flex-start;
  opacity:.92;
  filter: drop-shadow(0 0 18px rgba(205,170,90,.10));
}
.vol-btn{
  width:42px;height:42px;
  border-radius:14px;
  border:1px solid rgba(205,170,90,.18);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.05), transparent 60%),
    linear-gradient(180deg, rgba(10,12,16,.72), rgba(0,0,0,.55));
  backdrop-filter: blur(16px);
  display:grid;
  place-items:center;
  cursor:pointer;
  box-shadow: 0 0 0 1px rgba(0,0,0,.30) inset, 0 16px 46px rgba(0,0,0,.38);
}
.vol-svg{ width:22px;height:22px; opacity:.92; }

.vol-panel{
  width:0;
  opacity:0;
  pointer-events:none;
  transform:translateY(2px);
  transition:.25s ease;
  padding:10px 0;
  border-radius:14px;
  border:1px solid rgba(205,170,90,.14);
  background: linear-gradient(180deg, rgba(10,12,16,.78), rgba(0,0,0,.62));
  backdrop-filter: blur(18px);
  box-shadow: 0 12px 44px rgba(0,0,0,.50);
  overflow:hidden;
  font-family:Cinzel, serif;
}
#volumeHUD.open .vol-panel{
  width:240px;
  opacity:1;
  pointer-events:auto;
  padding:10px 12px;
}
.vol-top{display:flex;justify-content:space-between;margin-bottom:8px;}
.vol-title{font-size:9px;letter-spacing:3px;opacity:.72;}
.vol-readout{font-size:10px;letter-spacing:2px;opacity:.92;}
#volSlider{ width:100%; cursor:pointer; }
#volSlider::-webkit-slider-runnable-track{
  height:6px;border-radius:999px;
  background: linear-gradient(90deg, rgba(245,248,255,.70), rgba(205,170,90,.22));
  border:1px solid rgba(205,170,90,.12);
}
#volSlider::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:16px;height:16px;border-radius:7px;
  margin-top:-6px;
  background: radial-gradient(circle at 30% 30%, rgba(245,248,255,1), rgba(205,170,90,.35));
  border:1px solid rgba(205,170,90,.22);
}
</style>
</head>
<body>

<video id="videoBlur" playsinline preload="auto" muted loop>
  <source src="https://files.catbox.moe/klaol5.webm" type="video/webm" />
</video>

<video id="video" playsinline preload="auto" loop>
  <source src="https://files.catbox.moe/klaol5.webm" type="video/webm" />
</video>

<audio id="ambience" preload="auto" loop>
  <source src="https://files.catbox.moe/99fu05.m4a" type="audio/mp4">
</audio>

<div class="scanlines"></div>
<div id="cinemaFX"></div>

<!-- LOADING / PORTÃO -->
<div id="loadingScreen" aria-label="Entrada">
  <div class="loadingWrap">
    <div class="gateSplit" aria-hidden="true">
      <div></div><div></div>
    </div>

    <div class="loadingCenter">
      <div class="loadingTitle" id="loadingTitle">SELOS SE FECHAM…</div>

      <!-- ✅ NOVO ENTER (imagem clicável) -->
      <div class="sigilBtn" id="sigilBtn" role="button" tabindex="0" aria-label="Clique para entrar">
        <img class="sigilImg" src="https://files.catbox.moe/l6h4rv.png" alt="Selo" />
      </div>

      <div class="sigilHint">CLIQUE NO SELO PARA ROMPER O PORTÃO</div>
      <div class="sigilHint2">ou pressione [ENTER]</div>
    </div>

    <div class="loadingFooter">TEMPLO // VIGIA</div>
    <div class="loadingFooterR">shadow temple interface: v1</div>
  </div>
</div>

<!-- TOP CONTROLS -->
<div id="topControls">
  <button class="ctrlBtn" id="btnFS" title="Tela cheia" aria-label="Tela cheia">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M8 3H5a2 2 0 0 0-2 2v3M16 3h3a2 2 0 0 1 2 2v3M8 21H5a2 2 0 0 1-2-2v-3M16 21h3a2 2 0 0 0 2-2v-3"
        fill="none" stroke="rgba(245,248,255,.88)" stroke-width="1.7" stroke-linecap="round"/>
    </svg>
  </button>

  <!-- Placeholder pros outros botões que você já tinha (grimório / painel etc.)
       A gente encaixa na V2 com o pergaminho do jeito certo. -->
  <button class="ctrlBtn" id="btnAdmin" title="Painel" aria-label="Painel">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 3c4.5 0 8 2.6 8 7.5 0 7-5.2 10.5-8 10.5S4 17.5 4 10.5C4 5.6 7.5 3 12 3Z"
        fill="none" stroke="rgba(245,248,255,.86)" stroke-width="1.6" stroke-linejoin="round"/>
      <path d="M9 10.5c.8-1.1 2-.9 3 0m3 0c.8-1.1 2-.9 3 0"
        fill="none" stroke="rgba(245,248,255,.68)" stroke-width="1.6" stroke-linecap="round"/>
    </svg>
  </button>
</div>

<!-- VOLUME (top-left) -->
<div id="volumeHUD" class="vol" aria-label="Volume">
  <button id="volIconBtn" class="vol-btn" type="button" aria-label="Abrir volume">
    <!-- ícone “sino/eco” (tema ritual) -->
    <svg class="vol-svg" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 3.6c2.6 0 4.6 2 4.6 4.6v2.4c0 1.6.6 2.8 1.6 3.8l.7.7H5.1l.7-.7c1-1 1.6-2.2 1.6-3.8V8.2c0-2.6 2-4.6 4.6-4.6Z"
        fill="none" stroke="rgba(245,248,255,.86)" stroke-width="1.6" stroke-linejoin="round"/>
      <path d="M10 18.6c.4 1 1.1 1.6 2 1.6s1.6-.6 2-1.6"
        fill="none" stroke="rgba(245,248,255,.62)" stroke-width="1.6" stroke-linecap="round"/>
    </svg>
  </button>

  <div id="volPanel" class="vol-panel" role="group" aria-label="Ajuste de volume">
    <div class="vol-top">
      <div class="vol-title">ECO // MIX</div>
      <div id="volReadout" class="vol-readout">45%</div>
    </div>
    <input type="range" id="volSlider" min="0" max="1" step="0.01" value="0.45" />
  </div>
</div>
<script>
/* ===== ELEMENTS ===== */
const video = document.getElementById("video");
const videoBlur = document.getElementById("videoBlur");
const ambience = document.getElementById("ambience");

const loadingScreen = document.getElementById("loadingScreen");
const loadingTitle = document.getElementById("loadingTitle");
const sigilBtn = document.getElementById("sigilBtn");

const btnFS = document.getElementById("btnFS");

/* Volume */
const volumeHUD = document.getElementById("volumeHUD");
const volSlider = document.getElementById("volSlider");
const volIconBtn = document.getElementById("volIconBtn");
const volPanel = document.getElementById("volPanel");
const volReadout = document.getElementById("volReadout");

let hasEntered = false;

/* ===== STOP MEDIA until enter ===== */
function hardStop(){
  if (hasEntered) return;
  try{ video.pause(); video.currentTime = 0; }catch(e){}
  try{ videoBlur.pause(); videoBlur.currentTime = 0; }catch(e){}
  try{ ambience.pause(); ambience.currentTime = 0; }catch(e){}
}
document.addEventListener("DOMContentLoaded", hardStop);
window.addEventListener("pageshow", hardStop);

/* ===== ENTER FLOW ===== */
async function doEnter(){
  if (hasEntered) return;

  document.body.classList.add("entering");
  loadingTitle.textContent = "SELO SE ROMPE…";

  // pequena “trava ritual”
  sigilBtn.style.transform = "translateY(-1px) scale(0.99)";
  setTimeout(()=>sigilBtn.style.transform="", 160);

  // tenta iniciar mídia (no clique funciona melhor)
  try{ await video.play(); }catch(e){}
  try{ await videoBlur.play(); }catch(e){}
  try{
    ambience.volume = 0.18;
    await ambience.play();
  }catch(e){}

  // finaliza
  hasEntered = true;
  document.body.classList.remove("entering");
  document.body.classList.add("entered");

  // remove da árvore depois do fade
  setTimeout(()=>{ loadingScreen.style.display = "none"; }, 700);
}

sigilBtn.addEventListener("click", doEnter);
sigilBtn.addEventListener("keydown", (e)=>{
  if (e.key === "Enter" || e.key === " ") doEnter();
});

document.addEventListener("keydown", (e)=>{
  if (e.key === "Enter" && !hasEntered) doEnter();
});

/* ===== VISIBILITY ===== */
document.addEventListener("visibilitychange", () => {
  if (document.hidden) {
    try{ video.pause(); }catch(e){}
    try{ videoBlur.pause(); }catch(e){}
    try{ ambience.pause(); }catch(e){}
    return;
  }
  if (!hasEntered) { hardStop(); return; }
  video.play().catch(()=>{});
  videoBlur.play().catch(()=>{});
  ambience.play().catch(()=>{});
});
/* ===== FULLSCREEN ===== */
async function toggleFullscreen(){
  try{
    if (!document.fullscreenElement) await document.documentElement.requestFullscreen();
    else await document.exitFullscreen();
  } catch(e){}
}
btnFS.addEventListener("click", toggleFullscreen);

/* ===== VOLUME (começa em 45%) ===== */
video.volume = 0.45;
volSlider.value = String(video.volume);

function updateVol(){
  const pct = Math.round(Number(video.volume) * 100);
  volReadout.textContent = pct + "%";
  ambience.volume = Math.min(0.28, Math.max(0.02, Number(video.volume) * 0.22));
}
volSlider.addEventListener("input", () => {
  video.volume = Number(volSlider.value);
  updateVol();
});
updateVol();

/* abre/fecha painel */
volIconBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  volumeHUD.classList.toggle("open");
});
document.addEventListener("click", () => volumeHUD.classList.remove("open"));

/* ===== fallback: se o vídeo travar/der erro ===== */
video.addEventListener("error", () => {
  loadingTitle.textContent = "SINAL FRACO… CLIQUE PARA ENTRAR";
});
videoBlur.addEventListener("error", () => {
  loadingTitle.textContent = "SINAL FRACO… CLIQUE PARA ENTRAR";
});
</script>

</body>
</html>
