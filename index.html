<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shadow Fight — Cinematic</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;background:#000;overflow:hidden}

/* Vídeo principal */
#mainVideo{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:opacity .6s ease;
  z-index:1;
}
#mainVideo.active{opacity:1}

/* Portal fullscreen */
#portalVideo{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:2;
  cursor:pointer;
}

/* fade */
#fade{
  position:absolute;
  inset:0;
  background:#000;
  opacity:0;
  transition:opacity .25s ease;
  z-index:3;
}
#fade.on{opacity:1}
</style>
</head>

<body>

<video
  id="mainVideo"
  src="https://files.catbox.moe/klaol5.webm"
  muted
  loop
  playsinline
></video>

<video
  id="portalVideo"
  src="https://files.catbox.moe/5ci6gd.mp4"
  muted
  playsinline
></video>

<div id="fade"></div>

<script>
const portal = document.getElementById("portalVideo");
const mainVideo = document.getElementById("mainVideo");
const fade = document.getElementById("fade");

let started = false;

// deixa parado no primeiro frame
portal.addEventListener("loadeddata", ()=>{
  try{ portal.currentTime = 0; }catch(e){}
  portal.pause();
}, {once:true});

async function start(){
  if(started) return;
  started = true;

  try{
    portal.currentTime = 0;
    await portal.play();
  }catch(e){
    started = false;
    return;
  }

  // quando acabar animação
  portal.addEventListener("ended", ()=>{
    fade.classList.add("on");

    setTimeout(()=>{
      portal.style.display="none";
      mainVideo.classList.add("active");
      mainVideo.play().catch(()=>{});
      fade.classList.remove("on");
    }, 200);

  }, {once:true});
}

portal.addEventListener("pointerdown", start);
</script>

</body>
</html>
