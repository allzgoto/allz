<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Shadow Temple Interface — v2</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter:wght@400;500&display=swap" rel="stylesheet" />

<style>
:root{
  --ink:#05060a;
  --coal:#0b0d12;

  /* Shadow Fight vibe (ferro + âmbar) */
  --amber: rgba(210,160,80,.85);
  --amber2: rgba(210,160,80,.18);
  --amber3: rgba(210,160,80,.10);

  --line: rgba(255,255,255,.08);
  --txt: rgba(245,248,255,.92);
  --dim: rgba(245,248,255,.62);

  --blur-amount: 26px;
}

*{margin:0;padding:0;box-sizing:border-box;}
body{
  background:var(--ink);
  overflow:hidden;
  color:var(--txt);
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* ========= VIDEO ========= */
#videoBlur{
  position:fixed;
  inset:-20%;
  width:140%;
  height:140%;
  object-fit:cover;
  filter: blur(var(--blur-amount)) brightness(.52) saturate(1.05) contrast(1.05);
  transform: translateZ(0);
  z-index:-5;
}
#video{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-4;
  background:black;
}

/* ========= FX ========= */
.scanlines{
  position:fixed;
  inset:0;
  background:repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.02),
    rgba(255,255,255,0.02) 1px,
    transparent 1px,
    transparent 4px
  );
  pointer-events:none;
  z-index:3;
  mix-blend-mode:overlay;
  opacity:.55;
}

#cinemaFX{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:4;
}
#cinemaFX::before{
  content:"";
  position:absolute;
  inset:-20%;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  opacity:.06;
  mix-blend-mode:overlay;
  transform: translateZ(0);
  animation:grain 6s steps(10) infinite;
}
#cinemaFX::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 50% 48%, transparent 0 62%, rgba(0,0,0,.42) 82%, rgba(0,0,0,.68) 100%),
    radial-gradient(circle at 55% 55%, rgba(210,160,80,.05), transparent 55%);
  opacity:.55;
}
@keyframes grain{
  0%{transform:translate(0,0)}
  10%{transform:translate(-2%, -3%)}
  20%{transform:translate(-4%, 2%)}
  30%{transform:translate(3%, -2%)}
  40%{transform:translate(2%, 4%)}
  50%{transform:translate(-3%, 2%)}
  60%{transform:translate(4%, 0%)}
  70%{transform:translate(0%, 3%)}
  80%{transform:translate(-2%, -2%)}
  90%{transform:translate(3%, 1%)}
  100%{transform:translate(0,0)}
}

/* Flash */
#glitchFlash{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9;
  opacity:0;
  background:
    radial-gradient(circle at 50% 50%, rgba(210,160,80,.10), transparent 55%),
    repeating-linear-gradient(0deg, rgba(255,255,255,.05) 0 1px, transparent 1px 5px);
  mix-blend-mode:screen;
}
.glitch-on #glitchFlash{ animation:glitchFlash .55s steps(6) 1; }
@keyframes glitchFlash{
  0%{opacity:0}
  10%{opacity:1; transform:translateX(6px)}
  25%{opacity:.28; transform:translateX(-8px)}
  40%{opacity:1; transform:translateX(4px)}
  60%{opacity:.18; transform:translateX(-4px)}
  80%{opacity:.85; transform:translateX(2px)}
  100%{opacity:0; transform:none}
}

/* ========= LOADING / ENTER ========= */
#loadingScreen{
  position:fixed;
  inset:0;
  background:radial-gradient(circle at center,#0a0c12,#000);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:70;
  transition:opacity .6s ease;
  overflow:hidden;
}

.loading-text{
  letter-spacing:6px;
  margin-bottom:20px;
  font-size:11px;
  opacity:.82;
  text-align:center;
  animation:flicker 2.2s infinite;
  max-width:90vw;
  font-family:Cinzel, serif;
}
@keyframes flicker{0%,100%{opacity:.78}50%{opacity:1}}

.spinner{
  width:40px;height:40px;
  border:3px solid rgba(255,255,255,.08);
  border-top:3px solid rgba(210,160,80,.65);
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

#enterBox{
  margin-top:34px;
  padding:18px 70px;
  border-radius:12px;
  background:rgba(10,12,16,0.62);
  border:1px solid rgba(210,160,80,0.36);
  backdrop-filter:blur(18px);
  letter-spacing:8px;
  font-weight:700;
  font-size:13px;
  color:rgba(245,248,255,.92);
  text-shadow:0 0 16px rgba(210,160,80,.12);
  opacity:0;
  pointer-events:none;
  transition:.4s ease;
  cursor:pointer;
  user-select:none;
  font-family:Cinzel, serif;
}
#enterBox.show{opacity:1; pointer-events:auto;}

#enterHint{
  margin-top:12px;
  font-size:9px;
  letter-spacing:4px;
  opacity:0;
  transition:.35s ease;
  color:rgba(245,248,255,.72);
  text-shadow:0 0 14px rgba(210,160,80,.10);
  user-select:none;
}
#enterHint.show{opacity:.88;}

#versionTag{
  position:fixed;
  right:18px;
  bottom:12px;
  z-index:6;
  font-size:9px;
  letter-spacing:3px;
  opacity:.33;
  user-select:none;
  text-shadow:0 0 12px rgba(210,160,80,.08);
  font-family:Cinzel, serif;
}
#versionTag .v{opacity:.88;color:rgba(245,248,255,.80);}
#loadingScreen #versionTag{ z-index:72; }

body.entered #loadingScreen{ display:none; }

/* ========= TOP BAR (tela normal) ========= */
/* só: volume (esq), fullscreen + pergaminho + admin (centro), SELOS (dir) */
#topControls{
  position:fixed;
  top:16px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  z-index:40;
  opacity:.95;
  filter: drop-shadow(0 0 18px rgba(210,160,80,.10));
}
body:not(.entered) #topControls{ display:none; }

.ctrlBtn{
  width:44px;height:38px;
  border-radius:16px;
  border:1px solid rgba(210,160,80,.24);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.06), transparent 58%),
    linear-gradient(180deg, rgba(10,12,16,.72), rgba(0,0,0,.55));
  backdrop-filter: blur(16px);
  cursor:pointer;
  display:grid;
  place-items:center;
  box-shadow:
    0 0 0 1px rgba(0,0,0,.30) inset,
    0 14px 38px rgba(0,0,0,.36);
  color:rgba(245,248,255,.92);
  transition:.15s ease;
}
.ctrlBtn:hover{
  transform: translateY(-1px);
  box-shadow:
    0 0 0 1px rgba(0,0,0,.30) inset,
    0 18px 46px rgba(0,0,0,.44),
    0 0 22px rgba(210,160,80,.08);
}
.ctrlBtn:active{transform:translateY(1px)}
.ctrlBtn svg{width:18px;height:18px;opacity:.92;}
<style>
/* ========= VOLUME (canto superior esquerdo — “pergaminho”) ========= */
#volumeHUD{
  position:fixed;
  top:14px;
  left:16px;
  z-index:41;
  display:flex;
  align-items:flex-start;
  gap:10px;
  opacity:.92;
  filter: drop-shadow(0 0 16px rgba(210,160,80,.10));
  transition:.2s ease;
}
body:not(.entered) #volumeHUD{ display:none; }

.vol-btn{
  width:44px;height:44px;
  border-radius:16px;
  border:1px solid rgba(210,160,80,.24);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(10,12,16,.70), rgba(0,0,0,.55));
  backdrop-filter: blur(14px);
  box-shadow:0 0 0 1px rgba(0,0,0,.28) inset, 0 18px 44px rgba(0,0,0,.40);
  display:grid;
  place-items:center;
  cursor:pointer;
  position:relative;
}
.vol-btn:hover{ transform: translateY(-1px); }
.vol-btn:active{ transform: translateY(1px); }

.vol-svg{ width:22px;height:22px; opacity:.92; }

.vol-panel{
  width:0;
  opacity:0;
  pointer-events:none;
  transform:translateY(-2px);
  transition:.22s ease;
  padding:10px 0;
  border-radius:16px;
  border:1px solid rgba(210,160,80,.18);
  background:
    radial-gradient(circle at 25% 25%, rgba(255,245,215,.18), transparent 55%),
    linear-gradient(180deg, rgba(10,12,16,.78), rgba(0,0,0,.62));
  backdrop-filter: blur(16px);
  box-shadow:0 18px 54px rgba(0,0,0,.55);
  overflow:hidden;
  font-family:Cinzel, serif;
}
#volumeHUD.open .vol-panel{
  width:240px;
  opacity:1;
  pointer-events:auto;
  padding:10px 12px;
}
.vol-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;}
.vol-title{font-size:9px;letter-spacing:4px;opacity:.76;}
.vol-readout{font-size:10px;letter-spacing:2px;color:rgba(245,248,255,.90);}

#volSlider{
  width:100%;
  height:26px;
  background:transparent;
  appearance:none;
  -webkit-appearance:none;
  cursor:pointer;
}
#volSlider::-webkit-slider-runnable-track{
  height:6px;border-radius:999px;
  background: linear-gradient(90deg, rgba(245,248,255,.78), rgba(210,160,80,.22));
  border:1px solid rgba(210,160,80,.16);
}
#volSlider::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:16px;height:16px;border-radius:8px;
  margin-top:-6px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,1), rgba(210,160,80,.35));
  border:1px solid rgba(210,160,80,.22);
  box-shadow:0 0 14px rgba(210,160,80,.12);
}
#volSlider::-moz-range-track{
  height:6px;border-radius:999px;
  background: linear-gradient(90deg, rgba(245,248,255,.78), rgba(210,160,80,.22));
  border:1px solid rgba(210,160,80,.16);
}
#volSlider::-moz-range-thumb{
  width:16px;height:16px;border-radius:8px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,1), rgba(210,160,80,.35));
  border:1px solid rgba(210,160,80,.22);
  box-shadow:0 0 14px rgba(210,160,80,.12);
}

/* ========= SELOS (direita) ========= */
#socialControl{
  position:fixed;
  top:14px;
  right:18px;
  z-index:42;
  opacity:.95;
  filter: drop-shadow(0 0 16px rgba(210,160,80,.10));
}
body:not(.entered) #socialControl{ display:none; }

.linkPill{
  height:38px;
  padding:0 12px;
  border-radius:999px;
  border:1px solid rgba(210,160,80,.20);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.06), transparent 60%),
    linear-gradient(180deg, rgba(10,12,16,.62), rgba(0,0,0,.38));
  backdrop-filter: blur(16px);
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:8px;
  color:rgba(245,248,255,.90);
  letter-spacing:4px;
  font-size:9px;
  box-shadow: 0 12px 34px rgba(0,0,0,.28);
  font-family:Cinzel, serif;
}
.linkPill svg{width:18px;height:18px;opacity:.92;}
.linkPill:hover{ transform: translateY(-1px); }
.linkPill:active{ transform: translateY(1px); }

#routesNode{
  position:fixed;
  top:58px;
  right:18px;
  z-index:42;
  display:none;
}
#routesNode.show{display:block;}
.routesBox{
  width:72px;
  padding:8px 8px;
  border-radius:18px;
  border:1px solid rgba(210,160,80,.16);
  background:
    radial-gradient(circle at 30% 15%, rgba(255,255,255,.05), transparent 60%),
    linear-gradient(180deg, rgba(10,12,16,.54), rgba(0,0,0,.36));
  backdrop-filter: blur(18px);
  box-shadow:0 18px 54px rgba(0,0,0,.45);
  display:flex;
  flex-direction:column;
  gap:8px;
}
.routeBtn{
  width:56px;
  height:56px;
  border-radius:18px;
  border:1px solid rgba(210,160,80,.14);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.05), transparent 64%),
    linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.30));
  box-shadow:0 0 0 1px rgba(0,0,0,.28) inset;
  display:grid;
  place-items:center;
  cursor:pointer;
  position:relative;
  opacity:0;
  transform:translateY(-6px);
}
#routesNode.show .routeBtn{ animation: dockIn .20s ease forwards; }
#routesNode.show .routeBtn:nth-child(1){animation-delay:.02s}
#routesNode.show .routeBtn:nth-child(2){animation-delay:.06s}
#routesNode.show .routeBtn:nth-child(3){animation-delay:.10s}
#routesNode.show .routeBtn:nth-child(4){animation-delay:.14s}
#routesNode.show .routeBtn:nth-child(5){animation-delay:.18s}
@keyframes dockIn{ to{opacity:1; transform:none;} }

.routeBtn:hover{
  border-color: rgba(210,160,80,.24);
  box-shadow:0 0 0 1px rgba(0,0,0,.28) inset, 0 0 22px rgba(210,160,80,.08);
  transform: translateY(-1px);
}
.routeIcon svg{ width:18px;height:18px; opacity:.92; }

.routeTip{
  position:absolute;
  right: calc(100% + 10px);
  top:50%;
  transform:translateY(-50%) translateX(10px);
  opacity:0;
  pointer-events:none;
  transition:.18s ease;
  padding:9px 11px;
  border-radius:14px;
  border:1px solid rgba(210,160,80,.16);
  background:rgba(0,0,0,.44);
  backdrop-filter: blur(12px);
  box-shadow:0 14px 40px rgba(0,0,0,.44);
  white-space:nowrap;
  min-width: 180px;
  font-family:Cinzel, serif;
}
.routeTip .t{display:block;font-size:9px;letter-spacing:4px;color:rgba(245,248,255,.92);}
.routeTip .s{display:block;margin-top:3px;font-size:8px;letter-spacing:2px;color:rgba(245,248,255,.70);}
.routeBtn:hover .routeTip{ opacity:1; transform:translateY(-50%) translateX(0); }

/* ====== PLACEHOLDER estilos dos painéis (catalog/terminal/games/admin) ======
   Mantive o que você já tinha (base), e o pergaminho REAL vai na Parte 3.
*/
</style>
</head>
<body>

<!-- VIDEO -->
<video id="videoBlur" playsinline preload="auto" muted loop>
  <source src="https://files.catbox.moe/klaol5.webm" type="video/webm" />
</video>

<video id="video" playsinline preload="auto" loop>
  <source src="https://files.catbox.moe/klaol5.webm" type="video/webm" />
</video>

<audio id="ambience" preload="auto" loop>
  <source src="https://files.catbox.moe/99fu05.m4a" type="audio/mp4">
</audio>

<div class="scanlines"></div>
<div id="cinemaFX"></div>
<div id="glitchFlash"></div>

<div id="versionTag"><span class="v">shadow temple interface: v2</span></div>

<!-- LOADING -->
<div id="loadingScreen">
  <div class="loading-text" id="dynamicText">O TEMPLO OBSERVA…</div>
  <div class="spinner" id="spinner"></div>
  <div id="enterBox">ENTRAR</div>
  <div id="enterHint">PRESSIONE [ENTER] PARA PROSSEGUIR</div>
  <div id="versionTag"><span class="v">shadow temple interface: v2</span></div>
</div>

<!-- VOLUME (canto superior esquerdo) -->
<div id="volumeHUD" aria-label="Volume">
  <button id="volIconBtn" class="vol-btn" type="button" aria-label="Abrir volume">
    <!-- ícone “pergaminho/som” (Shadow vibe) -->
    <svg class="vol-svg" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M7 4h8a2 2 0 0 1 2 2v12H7a3 3 0 0 1 0-6h10"
        fill="none" stroke="rgba(245,248,255,.86)" stroke-width="1.7" stroke-linejoin="round"/>
      <path d="M9.5 10.5c1.2-1 2.8-1 4 0M9.5 13.5c1.2-1 2.8-1 4 0"
        fill="none" stroke="rgba(245,248,255,.70)" stroke-width="1.6" stroke-linecap="round"/>
    </svg>
  </button>

  <div class="vol-panel" role="group" aria-label="Ajuste de volume">
    <div class="vol-top">
      <div class="vol-title">ECO // VOLUME</div>
      <div id="volReadout" class="vol-readout">45%</div>
    </div>
    <input type="range" id="volSlider" min="0" max="1" step="0.01" value="0.45" />
  </div>
</div>

<!-- TOP CONTROLS (tela normal): fullscreen + pergaminho + admin -->
<div id="topControls">
  <button class="ctrlBtn" id="btnFS" title="Tela cheia" aria-label="Tela cheia">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M8 3H5a2 2 0 0 0-2 2v3M16 3h3a2 2 0 0 1 2 2v3M8 21H5a2 2 0 0 1-2-2v-3M16 21h3a2 2 0 0 0 2-2v-3"
        fill="none" stroke="rgba(245,248,255,.88)" stroke-width="1.7" stroke-linecap="round"/>
    </svg>
  </button>

  <button class="ctrlBtn" id="btnScroll" title="Pergaminho" aria-label="Pergaminho">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M7 4h10v16H7a3 3 0 0 1 0-6h10"
        fill="none" stroke="rgba(245,248,255,.86)" stroke-width="1.7" stroke-linejoin="round"/>
      <path d="M10 9h5M10 12h5M10 15h4"
        fill="none" stroke="rgba(245,248,255,.78)" stroke-width="1.7" stroke-linecap="round"/>
    </svg>
  </button>

  <button class="ctrlBtn" id="btnAdmin" title="Câmara Secreta" aria-label="Admin">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 3c4.5 0 8 2.6 8 7.5 0 7-5.2 10.5-8 10.5S4 17.5 4 10.5C4 5.6 7.5 3 12 3Z"
        fill="none" stroke="rgba(245,248,255,.86)" stroke-width="1.6" stroke-linejoin="round"/>
      <path d="M9 10.5c.8-1.1 2-.9 3 0m3 0c.8-1.1 2-.9 3 0"
        fill="none" stroke="rgba(245,248,255,.68)" stroke-width="1.6" stroke-linecap="round"/>
    </svg>
  </button>
</div>

<!-- SELOS (abre menu) -->
<div id="socialControl" aria-label="Selos">
  <button class="linkPill" id="btnLinks" type="button" title="SELOS" aria-label="Abrir selos">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 3.7 19 8v8l-7 4.3L5 16V8l7-4.3Z"
        fill="none" stroke="rgba(245,248,255,.84)" stroke-width="1.6" stroke-linejoin="round"/>
      <path d="M12 7v10" fill="none" stroke="rgba(245,248,255,.60)" stroke-width="1.6" stroke-linecap="round"/>
    </svg>
    <span>SELOS</span>
  </button>
</div>

<div id="routesNode" aria-hidden="true">
  <div class="routesBox" role="navigation" aria-label="Selos externos">

    <!-- Social -->
    <button class="routeBtn" id="rSocial" type="button" aria-label="Sociais" data-title="SOCIAIS" data-sub="Discord / Instagram">
      <span class="routeIcon" aria-hidden="true">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 8c3-3 9-3 12 0v8c-3 3-9 3-12 0V8Z"
            fill="none" stroke="rgba(245,248,255,.80)" stroke-width="1.6" stroke-linejoin="round"/>
          <path d="M9 12h.01M15 12h.01" stroke="rgba(245,248,255,.75)" stroke-width="2.8" stroke-linecap="round"/>
        </svg>
      </span>
      <span class="routeTip" aria-hidden="true"><span class="t">SOCIAIS</span><span class="s">Discord / Instagram</span></span>
    </button>

    <!-- Arquivos -->
    <button class="routeBtn" id="rArchive" type="button" aria-label="Arquivos" data-title="ARQUIVOS" data-sub="Catálogo / Índice">
      <span class="routeIcon" aria-hidden="true">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 7h12v4H6V7Z" fill="none" stroke="rgba(245,248,255,.80)" stroke-width="1.6" stroke-linejoin="round"/>
          <path d="M7 11v9h10v-9" fill="none" stroke="rgba(245,248,255,.62)" stroke-width="1.6" stroke-linejoin="round"/>
        </svg>
      </span>
      <span class="routeTip" aria-hidden="true"><span class="t">ARQUIVOS</span><span class="s">Catálogo / Índice</span></span>
    </button>

    <!-- Arena -->
    <button class="routeBtn" id="rGames" type="button" aria-label="Arena" data-title="ARENA" data-sub="Hub / Vitrine">
      <span class="routeIcon" aria-hidden="true">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M4 20l6-2 10-10-4-4L6 14l-2 6Z" fill="none" stroke="rgba(245,248,255,.80)" stroke-width="1.6" stroke-linejoin="round"/>
        </svg>
      </span>
      <span class="routeTip" aria-hidden="true"><span class="t">ARENA</span><span class="s">Hub / Vitrine</span></span>
    </button>

    <!-- Grimório (terminal antigo) -->
    <button class="routeBtn" id="rGrimoire" type="button" aria-label="Grimório" data-title="GRIMÓRIO" data-sub="Terminal">
      <span class="routeIcon" aria-hidden="true">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M7 4h9a2 2 0 0 1 2 2v14H7a3 3 0 0 1 0-6h11"
            fill="none" stroke="rgba(245,248,255,.84)" stroke-width="1.6" stroke-linejoin="round"/>
        </svg>
      </span>
      <span class="routeTip" aria-hidden="true"><span class="t">GRIMÓRIO</span><span class="s">Terminal</span></span>
    </button>

  </div>
</div>

<!-- ===== PERGAMINHO REAL (overlay) ===== -->
<div id="scrollOverlay" aria-hidden="true"></div>

<!-- ====== PAINÉIS (mantive estrutura simples — você já tinha esses) ====== -->
<div id="channels" style="display:none;"></div>
<div id="catalog" style="display:none;"></div>
<div id="terminal" style="display:none;"></div>
<div id="gamesPanel" style="display:none;"></div>
<div id="admin" style="display:none;"></div>
<script>
/* =========================
   MONTAR PERGAMINHO REAL
========================= */
(function buildScroll(){
  const host = document.getElementById("scrollOverlay");
  if(!host) return;

  host.innerHTML = `
  <style>
  /* ============================
     PERGAMINHO REAL — Shadow v2
  ============================ */
  #scrollOverlay{
    position:fixed;
    inset:0;
    z-index:60;
    display:none;
    background: radial-gradient(circle at 50% 45%, rgba(0,0,0,.35), rgba(0,0,0,.78));
    backdrop-filter: blur(10px);
  }
  #scrollOverlay.show{ display:block; }

  .scrollStage{
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:min(980px, calc(100vw - 40px));
    height:min(620px, calc(100vh - 40px));
    display:grid;
    place-items:center;
  }

  .scrollClose{
    position:absolute;
    top:-6px;
    right:0;
    z-index:3;
    border:1px solid rgba(255,255,255,.18);
    background: rgba(0,0,0,.35);
    color: rgba(245,248,255,.86);
    padding:8px 12px;
    border-radius:12px;
    letter-spacing:3px;
    font-family: Cinzel, serif;
    cursor:pointer;
    backdrop-filter: blur(10px);
  }

  .scrollRoll{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    width:42px;
    height:92%;
    border-radius:999px;
    background:
      linear-gradient(180deg, rgba(70,44,18,.95), rgba(20,12,6,.95)),
      repeating-linear-gradient(180deg, rgba(255,255,255,.08) 0 2px, transparent 2px 10px);
    box-shadow:
      0 22px 60px rgba(0,0,0,.65),
      inset 0 0 0 2px rgba(0,0,0,.35),
      inset 0 0 22px rgba(255,210,130,.10);
    opacity:.95;
  }
  .scrollRoll.left{ left:-14px; }
  .scrollRoll.right{ right:-14px; }
  .scrollRoll::after{
    content:"";
    position:absolute;
    inset:6px;
    border-radius:999px;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.10), transparent 60%);
    opacity:.9;
  }

  .scrollPaper{
    position:relative;
    width:100%;
    height:100%;
    border-radius:18px;
    padding:22px 22px 16px 22px;
    background:
      radial-gradient(circle at 30% 20%, rgba(255,245,215,.92), rgba(212,168,96,.92) 55%, rgba(110,70,22,.92) 120%),
      repeating-linear-gradient(0deg, rgba(0,0,0,.05) 0 1px, transparent 1px 6px),
      radial-gradient(circle at 65% 70%, rgba(0,0,0,.12), transparent 55%);
    box-shadow:
      0 30px 120px rgba(0,0,0,.75),
      inset 0 0 0 1px rgba(0,0,0,.30),
      inset 0 0 38px rgba(0,0,0,.35);
    overflow:hidden;
  }

  .scrollPaper::before{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    background:
      radial-gradient(circle at 50% 50%, transparent 0 60%, rgba(0,0,0,.30) 80%, rgba(0,0,0,.55) 100%),
      radial-gradient(circle at 35% 20%, rgba(0,0,0,.18), transparent 55%);
    opacity:.65;
  }

  .scrollHeader{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    padding-bottom:12px;
    border-bottom:1px solid rgba(0,0,0,.22);
    position:relative;
    z-index:1;
  }
  .scrollTitle{
    font-family:Cinzel, serif;
    font-size:12px;
    letter-spacing:5px;
    color: rgba(20,10,4,.92);
    text-shadow: 0 1px 0 rgba(255,255,255,.18);
  }
  .scrollSigil{
    font-family:Cinzel, serif;
    font-size:12px;
    letter-spacing:6px;
    color: rgba(20,10,4,.75);
    opacity:.9;
  }

  .scrollLog{
    margin-top:14px;
    height:calc(100% - 140px);
    overflow:auto;
    padding:14px 12px;
    border-radius:14px;
    background: rgba(0,0,0,.10);
    box-shadow: inset 0 0 0 1px rgba(0,0,0,.18);
    color: rgba(14,8,4,.92);
    font-family: Inter, system-ui, sans-serif;
    font-size:13px;
    line-height:1.55;
    position:relative;
    z-index:1;
  }
  .scrollLog .dim{ opacity:.65; }

  .scrollInputRow{
    margin-top:12px;
    display:flex;
    align-items:center;
    gap:10px;
    padding-top:12px;
    border-top:1px solid rgba(0,0,0,.20);
    position:relative;
    z-index:1;
  }
  .scrollPrompt{
    font-family:Cinzel, serif;
    font-size:11px;
    letter-spacing:4px;
    color: rgba(18,9,3,.78);
    white-space:nowrap;
  }
  #scrollInput{
    flex:1;
    height:40px;
    border-radius:14px;
    border:1px solid rgba(0,0,0,.28);
    background: rgba(255,255,255,.18);
    color: rgba(12,7,3,.92);
    padding:0 14px;
    font-size:13px;
    outline:none;
  }
  #scrollInput::placeholder{ color: rgba(20,10,4,.45); }

  .scrollHint{
    margin-top:10px;
    font-family:Cinzel, serif;
    font-size:10px;
    letter-spacing:4px;
    color: rgba(18,9,3,.62);
    opacity:.9;
    position:relative;
    z-index:1;
  }

  /* ============================
     ANIMAÇÃO: DESENROLAR / ENROLAR
  ============================ */
  #scrollOverlay.show .scrollPaper{
    animation: unroll .62s cubic-bezier(.2,.9,.18,1) both;
    transform-origin:center;
  }
  #scrollOverlay.closing .scrollPaper{
    animation: rollup .42s ease both;
  }

  @keyframes unroll{
    0%{
      clip-path: inset(0 46% 0 46% round 18px);
      transform: translateY(20px) scaleY(.92);
      filter: blur(1.5px);
      opacity:0;
    }
    55%{ opacity:1; filter: blur(0); }
    100%{
      clip-path: inset(0 0 0 0 round 18px);
      transform: translateY(0) scaleY(1);
      opacity:1;
    }
  }
  @keyframes rollup{
    0%{ clip-path: inset(0 0 0 0 round 18px); opacity:1; }
    100%{
      clip-path: inset(0 46% 0 46% round 18px);
      transform: translateY(18px) scaleY(.92);
      opacity:0;
    }
  }
  </style>

  <div class="scrollStage">
    <button id="scrollCloseBtn" class="scrollClose" type="button">FECHAR</button>
    <div class="scrollRoll left" aria-hidden="true"></div>
    <div class="scrollRoll right" aria-hidden="true"></div>

    <div class="scrollPaper">
      <div class="scrollHeader">
        <div class="scrollTitle">PERGAMINHO // JURAMENTO</div>
        <div class="scrollSigil">Σ Δ Ψ</div>
      </div>

      <div id="scrollLog" class="scrollLog"></div>

      <div class="scrollInputRow">
        <div class="scrollPrompt">sombra@templo:~$</div>
        <input id="scrollInput" type="text" autocomplete="off" spellcheck="false"
          placeholder="Digite: help | clear | glitch | mute | vol 0-100" />
      </div>

      <div class="scrollHint">ENTER = enviar • ESC = fechar</div>
    </div>
  </div>
  `;
})();

/* =========================
   ELEMENTOS
========================= */
const video = document.getElementById("video");
const videoBlur = document.getElementById("videoBlur");
const ambience = document.getElementById("ambience");

const loadingScreen = document.getElementById("loadingScreen");
const enterBox = document.getElementById("enterBox");
const enterHint = document.getElementById("enterHint");
const dynamicText = document.getElementById("dynamicText");

const btnFS = document.getElementById("btnFS");
const btnScroll = document.getElementById("btnScroll");
const btnAdmin = document.getElementById("btnAdmin");

const volumeHUD = document.getElementById("volumeHUD");
const volIconBtn = document.getElementById("volIconBtn");
const volSlider = document.getElementById("volSlider");
const volReadout = document.getElementById("volReadout");

const btnLinks = document.getElementById("btnLinks");
const routesNode = document.getElementById("routesNode");
const rSocial = document.getElementById("rSocial");
const rArchive = document.getElementById("rArchive");
const rGames = document.getElementById("rGames");
const rGrimoire = document.getElementById("rGrimoire");

let hasEntered = false;

/* =========================
   LOADING TEXT
========================= */
const messages = [
  "O TEMPLO OBSERVA…",
  "SELOS SE FECHAM…",
  "O PORTAL RESPIRA…",
  "SOMBRA EM SILÊNCIO…",
  "PRESENÇA DETECTADA…",
  "UM PASSO E NÃO VOLTA…"
];
let msgIndex = 0;
setInterval(() => {
  msgIndex = (msgIndex + 1) % messages.length;
  dynamicText.textContent = messages[msgIndex];
}, 2200);

/* =========================
   TRAVAR mídia até ENTER
========================= */
function hardStopMediaIfNotEntered(){
  if (hasEntered) return;
  try{ video.pause(); video.currentTime = 0; }catch(e){}
  try{ videoBlur.pause(); videoBlur.currentTime = 0; }catch(e){}
  try{ ambience.pause(); ambience.currentTime = 0; }catch(e){}
}
document.addEventListener("DOMContentLoaded", hardStopMediaIfNotEntered);
window.addEventListener("pageshow", hardStopMediaIfNotEntered);

/* =========================
   READY / ENTER
========================= */
enterBox.classList.add("show");
enterHint.classList.add("show");

async function enterTemple(){
  if (hasEntered) return;
  hasEntered = true;

  document.body.classList.add("entered");

  // tentar tocar vídeo
  try{
    // alguns navegadores precisam do primeiro play sem som
    video.muted = false;
    await video.play();
  }catch(e){
    try{ video.muted = true; await video.play(); }catch(_){}
    // depois você desmuta se quiser
    setTimeout(()=>{ video.muted = false; }, 450);
  }

  // blur sincroniza
  try{ await videoBlur.play(); }catch(e){}

  // audio ambiente (pode falhar por autoplay)
  try{ await ambience.play(); }catch(e){}

  // volume default 45%
  video.volume = 0.45;
  volSlider.value = "0.45";
  updateVolumeUI();
}

function maybeEnterByKey(e){
  if (e.key === "Enter") enterTemple();
}
document.addEventListener("keydown", maybeEnterByKey);
enterBox.addEventListener("click", enterTemple);

/* pausa quando perder foco */
document.addEventListener("visibilitychange", () => {
  if (document.hidden){
    try{ video.pause(); }catch(e){}
    try{ videoBlur.pause(); }catch(e){}
    try{ ambience.pause(); }catch(e){}
    return;
  }
  if (!hasEntered){
    hardStopMediaIfNotEntered();
    return;
  }
  video.play().catch(()=>{});
  videoBlur.play().catch(()=>{});
  ambience.play().catch(()=>{});
});

/* =========================
   FULLSCREEN
========================= */
async function toggleFullscreen(){
  try{
    if (!document.fullscreenElement) await document.documentElement.requestFullscreen();
    else await document.exitFullscreen();
  }catch(e){}
}
btnFS?.addEventListener("click", toggleFullscreen);

/* =========================
   VOLUME UI
========================= */
function updateVolumeUI(){
  const pct = Math.round((video.volume || 0) * 100);
  volReadout.textContent = pct + "%";
  ambience.volume = Math.min(0.35, Math.max(0.02, (video.volume || 0) * 0.25));
}
volSlider?.addEventListener("input", () => {
  video.volume = Number(volSlider.value);
  updateVolumeUI();
});
updateVolumeUI();

volIconBtn?.addEventListener("click", (e) => {
  e.stopPropagation();
  volumeHUD.classList.toggle("open");
});
document.addEventListener("click", () => volumeHUD.classList.remove("open"));

/* =========================
   SELOS MENU
========================= */
btnLinks?.addEventListener("click", (e) => {
  e.stopPropagation();
  routesNode.classList.toggle("show");
});
document.addEventListener("click", () => routesNode.classList.remove("show"));

/* =========================
   GLITCH helper
========================= */
function triggerGlitch(){
  document.body.classList.remove("glitch-on");
  void document.body.offsetWidth;
  document.body.classList.add("glitch-on");
  setTimeout(()=>document.body.classList.remove("glitch-on"), 650);
}

/* =========================
   PERGAMINHO REAL (open/close + comandos)
========================= */
const scrollOverlay = document.getElementById("scrollOverlay");
const scrollCloseBtn = () => document.getElementById("scrollCloseBtn");
const scrollInput = () => document.getElementById("scrollInput");
const scrollLog = () => document.getElementById("scrollLog");

function inkLine(txt, dim=false){
  const log = scrollLog();
  if(!log) return;
  const div = document.createElement("div");
  div.className = dim ? "dim" : "";
  div.textContent = txt;
  log.appendChild(div);
  log.scrollTop = log.scrollHeight;
}

function openScroll(){
  if (!scrollOverlay) return;
  scrollOverlay.classList.remove("closing");
  scrollOverlay.classList.add("show");
  setTimeout(()=>scrollInput()?.focus(), 220);

  const log = scrollLog();
  if (log && log.childElementCount === 0){
    inkLine("— O pergaminho desperta…", true);
    inkLine("Digite: help | clear | glitch | mute | vol 0-100", true);
    inkLine(" ");
    inkLine("NO INÍCIO, O TEMPLO RESPIRAVA EM SILÊNCIO.");
    inkLine("A SOMBRA CAMINHAVA SEM ROSTO, SEM NOME, SEM LUZ.");
    inkLine("O PORTAL TREMEU. O SELO RACHOU.");
    inkLine("A ARENA PEDIA SANGUE, FERRO E DISCIPLINA.");
    inkLine("SE VOCÊ ABRIR ISTO, NÃO VOLTA IGUAL.");
    inkLine("Σ Δ Ψ // JURAMENTO DO SOMBRA", true);
    inkLine(" ");
  }
}

function closeScroll(){
  if (!scrollOverlay) return;
  if (!scrollOverlay.classList.contains("show")) return;
  scrollOverlay.classList.add("closing");
  setTimeout(()=>scrollOverlay.classList.remove("show","closing"), 420);
}

btnScroll?.addEventListener("click", openScroll);
document.addEventListener("click", (e)=>{
  if(!scrollOverlay?.classList.contains("show")) return;
  // clique fora fecha
  const paper = scrollOverlay.querySelector(".scrollPaper");
  if (paper && !paper.contains(e.target) && !btnScroll.contains(e.target)) closeScroll();
});

document.addEventListener("keydown", (e)=>{
  if(e.key === "Escape") closeScroll();
});

document.addEventListener("click", ()=>{
  const b = scrollCloseBtn();
  if(!b) return;
  b.onclick = closeScroll;
});

document.addEventListener("keydown", (e)=>{
  const input = scrollInput();
  if(!input) return;
  if(document.activeElement !== input) return;
  if (e.key !== "Enter") return;

  const cmd = (input.value || "").trim();
  input.value = "";
  if (!cmd) return;

  inkLine(`sombra@templo:~$ ${cmd}`, true);
  const low = cmd.toLowerCase();

  if (low === "help"){
    inkLine("Comandos:");
    inkLine("help • clear • glitch • mute • vol 0-100", true);
    return;
  }
  if (low === "clear"){
    const log = scrollLog(); if(log) log.innerHTML = "";
    return;
  }
  if (low === "glitch"){
    triggerGlitch();
    inkLine("O selo tremeu.", true);
    return;
  }
  if (low === "mute"){
    video.muted = !video.muted;
    inkLine(video.muted ? "ECO SELADO." : "ECO ABERTO.", true);
    return;
  }
  if (low.startsWith("vol")){
    const n = Number(low.replace("vol","").trim());
    if (!isNaN(n)){
      video.volume = Math.max(0, Math.min(1, n/100));
      volSlider.value = String(video.volume);
      updateVolumeUI();
      inkLine(`Volume: ${Math.round(video.volume*100)}%`, true);
    }else{
      inkLine("Uso: vol 0-100", true);
    }
    return;
  }
  inkLine("Comando desconhecido. Digite help.", true);
});

/* =========================
   ADMIN (senha Projeto26)
   (mínimo funcional — depois a gente deixa lindo)
========================= */
function openAdmin(){
  alert("Admin: senha Projeto26 (próximo passo: painel real dentro do site).");
}
btnAdmin?.addEventListener("click", openAdmin);

/* =========================
   ROTAS DO SELOS (placeholder rápido)
   (na v2 você me diz o conteúdo final e eu monto)
========================= */
rSocial?.addEventListener("click", ()=> {
  routesNode.classList.remove("show");
  alert("SOCIAIS: aqui abrimos seu painel Discord/Instagram (v2).");
});
rArchive?.addEventListener("click", ()=> {
  routesNode.classList.remove("show");
  alert("ARQUIVOS: aqui abre o Catálogo (v2).");
});
rGames?.addEventListener("click", ()=> {
  routesNode.classList.remove("show");
  alert("ARENA: aqui abre seu HUB de jogos (v2).");
});
rGrimoire?.addEventListener("click", ()=> {
  routesNode.classList.remove("show");
  alert("GRIMÓRIO: aqui abre o terminal antigo (v2).");
});

/* =========================
   PERFORMANCE (reduz travadinhas)
========================= */
video.playsInline = true;
video.preload = "auto";
videoBlur.preload = "auto";
</script>

</body>
</html>
