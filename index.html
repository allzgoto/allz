<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Shadow Fight — Demonic Sigil v2</title>

<style>
  *{margin:0;padding:0;box-sizing:border-box}
  html,body{width:100%;height:100%;background:#000;overflow:hidden}

  /* Vídeo principal atrás */
  #mainVideo{
    position:fixed; inset:0;
    width:100%; height:100%;
    object-fit:cover;
    z-index:0;
    opacity:0;
    transition:opacity 700ms ease;
    filter:contrast(1.08) saturate(0.9);
  }
  body.entered #mainVideo{opacity:1}

  /* ENTRY */
  #entry{
    position:fixed; inset:0;
    z-index:10;
    display:grid;
    place-items:center;
    background:#040405;
    cursor:pointer;
    user-select:none;
  }

  /* fundo: textura + vinheta pesada + “sombra” */
  #entry::before{
    content:"";
    position:absolute; inset:-60px;
    background:
      radial-gradient(circle at 50% 55%, rgba(120,40,255,0.07), transparent 58%),
      radial-gradient(circle at 20% 55%, rgba(255,90,40,0.04), transparent 55%),
      repeating-linear-gradient(112deg, rgba(255,255,255,0.018) 0 2px, transparent 2px 18px),
      repeating-linear-gradient(0deg, rgba(0,0,0,0.35) 0 1px, transparent 1px 4px);
    opacity:.9;
    filter:blur(0.25px);
    pointer-events:none;
  }
  #entry::after{
    content:"";
    position:absolute; inset:0;
    background:
      radial-gradient(circle at center, rgba(0,0,0,0.05) 20%, rgba(0,0,0,0.90) 100%),
      radial-gradient(circle at 50% 40%, rgba(255,255,255,0.03), transparent 60%);
    pointer-events:none;
  }

  /* fumaça + brasas */
  #fx{
    position:absolute; inset:0;
    z-index:1;
    pointer-events:none;
  }

  /* “ameaça” nas bordas */
  .edge-shadows{
    position:absolute; inset:0;
    z-index:2;
    pointer-events:none;
    background:
      radial-gradient(circle at 10% 80%, rgba(0,0,0,0.0), rgba(0,0,0,0.92) 70%),
      radial-gradient(circle at 90% 80%, rgba(0,0,0,0.0), rgba(0,0,0,0.92) 70%);
    opacity:.55;
    filter:blur(0.6px);
  }

  /* CONTAINER CENTRAL */
  .center{
    position:relative;
    width:min(640px, 92vw);
    height:min(640px, 92vw);
    display:grid;
    place-items:center;
    z-index:5;
  }

  /* brilho pulsante baixo */
  .pulse{
    position:absolute; inset:-35%;
    background:
      radial-gradient(circle at 50% 50%, rgba(255,120,60,0.10), transparent 58%),
      radial-gradient(circle at 50% 55%, rgba(120,40,255,0.08), transparent 62%);
    filter:blur(16px);
    opacity:.5;
    animation:pulse 2.8s ease-in-out infinite;
    pointer-events:none;
  }
  @keyframes pulse{
    0%,100%{opacity:.38; transform:scale(0.98)}
    50%{opacity:.62; transform:scale(1.02)}
  }

  /* ====== “SEL0” FEITO EM SVG (duas metades para rasgar) ====== */
  .sigil-half{
    position:absolute;
    inset:0;
    display:grid;
    place-items:center;
    transition:transform 720ms cubic-bezier(.2,.9,.2,1), opacity 720ms ease, filter 720ms ease;
    will-change:transform;
  }
  .sigil-half.left{ clip-path:inset(0 50% 0 0); }
  .sigil-half.right{ clip-path:inset(0 0 0 50%); }

  .sigil{
    width:78%;
    height:78%;
    opacity:.92;
    filter:drop-shadow(0 0 26px rgba(255,130,70,0.10));
  }

  /* estilo do selo */
  .ring{ stroke:rgba(255,255,255,0.18); stroke-width:2.2; fill:none; }
  .ring2{ stroke:rgba(255,255,255,0.10); stroke-width:1.6; fill:none; }
  .glyph{ stroke:rgba(255,140,80,0.16); stroke-width:1.8; fill:none; stroke-linecap:round; stroke-linejoin:round; }
  .etch{ stroke:rgba(255,255,255,0.06); stroke-width:1.2; fill:none; }

  /* giro lento interno (não “infantil”: bem apagado) */
  .spin{
    transform-origin:50% 50%;
    animation:spin 18s linear infinite;
    opacity:.75;
  }
  @keyframes spin{to{transform:rotate(360deg)}}

  /* rachaduras fortes (desenho + dash) */
  .crack{
    stroke:rgba(255,255,255,0.85);
    stroke-width:2.6;
    fill:none;
    stroke-linecap:round;
    stroke-linejoin:round;
    opacity:0;
    stroke-dasharray:420;
    stroke-dashoffset:420;
    filter:drop-shadow(0 0 10px rgba(120,40,255,0.18));
  }

  /* texto discreto */
  .hint{
    position:absolute;
    bottom:-22px;
    width:100%;
    text-align:center;
    letter-spacing:6px;
    font-size:12px;
    color:rgba(255,255,255,0.18);
    text-transform:uppercase;
    z-index:6;
  }

  /* ====== RASGO NO MEIO (irregular sem imagem) ====== */
  .tear{
    position:absolute;
    left:50%;
    top:-10%;
    height:120%;
    width:14px;
    transform:translateX(-50%);
    z-index:7;
    opacity:0;
    pointer-events:none;
    /* borda “rasgada” via máscara */
    background:
      linear-gradient(to bottom,
        rgba(0,0,0,0) 0%,
        rgba(0,0,0,0.95) 15%,
        rgba(0,0,0,1) 50%,
        rgba(0,0,0,0.95) 85%,
        rgba(0,0,0,0) 100%);
    filter:blur(0.2px);
  }
  .tear::before{
    content:"";
    position:absolute; inset:-10px;
    background:
      repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.0) 0 10px,
        rgba(255,140,80,0.08) 10px 12px,
        rgba(255,255,255,0.0) 12px 22px
      );
    opacity:.65;
    filter:blur(1.2px);
    mix-blend-mode:screen;
  }

  /* overlay final (engole a tela) */
  .swallow{
    position:fixed; inset:0;
    z-index:11;
    pointer-events:none;
    opacity:0;
    background:radial-gradient(circle at center, rgba(120,40,255,0.0) 0%, rgba(120,40,255,0.18) 35%, rgba(0,0,0,1) 72%);
    transform:scale(0.85);
  }

  /* flash curtinho */
  .flash{
    position:fixed; inset:0;
    z-index:12;
    pointer-events:none;
    background:#fff;
    opacity:0;
  }

  /* ====== SEQUÊNCIA DO CLIQUE ====== */
  body.breaking .center{ animation:shake 520ms ease-in-out 1; }
  @keyframes shake{
    0%{transform:translate(0)}
    15%{transform:translate(-6px,3px)}
    30%{transform:translate(7px,-3px)}
    45%{transform:translate(-5px,2px)}
    60%{transform:translate(4px,-2px)}
    100%{transform:translate(0)}
  }

  body.breaking .crack{
    opacity:1;
    animation:drawCrack 620ms ease forwards;
  }
  @keyframes drawCrack{ to{stroke-dashoffset:0;} }

  body.tearing .tear{
    opacity:1;
    animation:tearGrow 520ms ease forwards;
  }
  @keyframes tearGrow{
    0%{width:14px}
    100%{width:70px}
  }

  body.tearing .sigil-half.left{
    transform:translateX(-140px) rotate(-3deg);
    filter:brightness(0.85);
  }
  body.tearing .sigil-half.right{
    transform:translateX(140px) rotate(3deg);
    filter:brightness(0.85);
  }

  body.tearing .swallow{
    opacity:1;
    transform:scale(1.25);
    transition:opacity 520ms ease, transform 520ms cubic-bezier(.12,.92,.12,1);
  }

  body.tearing .flash{
    animation:flash 220ms ease forwards;
  }
  @keyframes flash{
    0%{opacity:0}
    35%{opacity:0.5}
    100%{opacity:0}
  }

  body.entered #entry{
    opacity:0;
    pointer-events:none;
    transition:opacity 520ms ease;
  }

  @media (prefers-reduced-motion: reduce){
    .spin{animation:none}
    body.breaking .center{animation:none}
    body.breaking .crack{animation:none; stroke-dashoffset:0; opacity:1}
    body.tearing .sigil-half.left,
    body.tearing .sigil-half.right{transform:none}
    body.tearing .tear{animation:none; opacity:1; width:70px}
  }
</style>
</head>

<body>
  <video
    id="mainVideo"
    src="https://files.catbox.moe/klaol5.webm"
    playsinline
    preload="auto"
    muted
    loop
  ></video>

  <section id="entry" aria-label="Selo demoníaco">
    <canvas id="fx"></canvas>
    <div class="edge-shadows" aria-hidden="true"></div>

    <div class="center" id="center">
      <div class="pulse" aria-hidden="true"></div>

      <!-- metade esquerda -->
      <div class="sigil-half left">
        <svg class="sigil" viewBox="0 0 200 200" aria-hidden="true">
          <circle class="ring" cx="100" cy="100" r="86"></circle>
          <circle class="ring2" cx="100" cy="100" r="72"></circle>

          <g class="spin">
            <path class="glyph" d="M100 26 L112 44 L100 62 L88 44 Z"></path>
            <path class="glyph" d="M174 100 L156 112 L138 100 L156 88 Z"></path>
            <path class="glyph" d="M100 174 L88 156 L100 138 L112 156 Z"></path>
            <path class="glyph" d="M26 100 L44 88 L62 100 L44 112 Z"></path>

            <path class="glyph" d="M100 34 C126 60, 126 140, 100 166 C74 140, 74 60, 100 34" opacity="0.55"></path>
            <path class="glyph" d="M34 100 C60 74, 140 74, 166 100 C140 126, 60 126, 34 100" opacity="0.55"></path>

            <!-- etch “sujo” -->
            <path class="etch" d="M58 58 L70 70 L58 82"></path>
            <path class="etch" d="M142 58 L130 70 L142 82"></path>
            <path class="etch" d="M58 142 L70 130 L58 118"></path>
            <path class="etch" d="M142 142 L130 130 L142 118"></path>
          </g>

          <!-- rachaduras -->
          <path class="crack" d="M100 36 L98 56 L112 74 L104 92 L120 112 L104 134 L114 160"></path>
          <path class="crack" d="M86 50 L74 74 L86 96 L72 116 L88 138"></path>
          <path class="crack" d="M118 56 L136 78 L124 100 L142 120 L126 146"></path>
        </svg>
      </div>

      <!-- metade direita -->
      <div class="sigil-half right">
        <svg class="sigil" viewBox="0 0 200 200" aria-hidden="true">
          <circle class="ring" cx="100" cy="100" r="86"></circle>
          <circle class="ring2" cx="100" cy="100" r="72"></circle>

          <g class="spin">
            <path class="glyph" d="M100 26 L112 44 L100 62 L88 44 Z"></path>
            <path class="glyph" d="M174 100 L156 112 L138 100 L156 88 Z"></path>
            <path class="glyph" d="M100 174 L88 156 L100 138 L112 156 Z"></path>
            <path class="glyph" d="M26 100 L44 88 L62 100 L44 112 Z"></path>

            <path class="glyph" d="M100 34 C126 60, 126 140, 100 166 C74 140, 74 60, 100 34" opacity="0.55"></path>
            <path class="glyph" d="M34 100 C60 74, 140 74, 166 100 C140 126, 60 126, 34 100" opacity="0.55"></path>

            <path class="etch" d="M58 58 L70 70 L58 82"></path>
            <path class="etch" d="M142 58 L130 70 L142 82"></path>
            <path class="etch" d="M58 142 L70 130 L58 118"></path>
            <path class="etch" d="M142 142 L130 130 L142 118"></path>
          </g>

          <path class="crack" d="M100 36 L98 56 L112 74 L104 92 L120 112 L104 134 L114 160"></path>
          <path class="crack" d="M86 50 L74 74 L86 96 L72 116 L88 138"></path>
          <path class="crack" d="M118 56 L136 78 L124 100 L142 120 L126 146"></path>
        </svg>
      </div>

      <div class="tear" aria-hidden="true"></div>
      <div class="hint">CLIQUE PARA QUEBRAR O SELO</div>
    </div>

    <div class="swallow" aria-hidden="true"></div>
    <div class="flash" aria-hidden="true"></div>
  </section>

<script>
  const entry = document.getElementById("entry");
  const mainVideo = document.getElementById("mainVideo");

  // ===== FX (fumaça + brasas) =====
  const canvas = document.getElementById("fx");
  const ctx = canvas.getContext("2d", { alpha:true });
  let W=0,H=0,DPR=1;

  const smoke = [];
  const embers = [];
  const SMOKE_N = 64;
  const EMBER_N = 80;

  const rand=(a,b)=>Math.random()*(b-a)+a;

  function resize(){
    DPR = devicePixelRatio || 1;
    W = canvas.width = innerWidth * DPR;
    H = canvas.height = innerHeight * DPR;
  }
  addEventListener("resize", resize);
  resize();

  function spawnSmoke(){
    return {
      x: rand(0,W),
      y: H + rand(0,H*0.2),
      r: rand(26, 78)*DPR,
      vy: rand(0.18, 0.55)*DPR,
      vx: rand(-0.12, 0.12)*DPR,
      a: rand(0.02, 0.07),
      wob: rand(0.0015, 0.006),
      life: rand(0.6, 1.2)
    };
  }
  function spawnEmber(){
    return {
      x: rand(0,W),
      y: H + rand(0,H*0.25),
      r: rand(0.7, 2.4)*DPR,
      vy: rand(0.35, 1.35)*DPR,
      vx: rand(-0.20, 0.20)*DPR,
      a: rand(0.04, 0.22),
      wob: rand(0.002, 0.008),
      life: rand(0.6, 1.2)
    };
  }
  for(let i=0;i<SMOKE_N;i++) smoke.push(spawnSmoke());
  for(let i=0;i<EMBER_N;i++) embers.push(spawnEmber());

  function tick(){
    ctx.clearRect(0,0,W,H);

    // base glow inferior
    const g = ctx.createRadialGradient(W*0.5, H*0.95, 0, W*0.5, H*0.95, H*0.85);
    g.addColorStop(0, "rgba(255,120,60,0.05)");
    g.addColorStop(1, "rgba(0,0,0,0)");
    ctx.fillStyle = g;
    ctx.fillRect(0,0,W,H);

    // fumaça (cinza + roxo)
    for(const s of smoke){
      s.x += s.vx + Math.sin(s.y*s.wob)*(0.35*DPR);
      s.y -= s.vy;
      const alpha = Math.max(0, Math.min(0.10, s.a))*s.life;

      ctx.beginPath();
      ctx.fillStyle = `rgba(210, 200, 230, ${alpha})`;
      ctx.shadowColor = `rgba(120, 40, 255, ${alpha*0.5})`;
      ctx.shadowBlur = 16*DPR;
      ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
      ctx.fill();
      ctx.shadowBlur = 0;

      if(s.y < -90) Object.assign(s, spawnSmoke());
    }

    // brasas
    for(const p of embers){
      p.x += p.vx + Math.sin(p.y*p.wob)*(0.35*DPR);
      p.y -= p.vy;
      const alpha = Math.max(0, Math.min(0.35, p.a))*p.life;

      ctx.beginPath();
      ctx.fillStyle = `rgba(255, 140, 80, ${alpha})`;
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fill();

      ctx.beginPath();
      ctx.strokeStyle = `rgba(255, 210, 140, ${alpha*0.25})`;
      ctx.lineWidth = p.r*1.4;
      ctx.moveTo(p.x, p.y);
      ctx.lineTo(p.x - p.vx*10, p.y + p.vy*12);
      ctx.stroke();

      if(p.y < -70) Object.assign(p, spawnEmber());
    }

    requestAnimationFrame(tick);
  }
  tick();

  // ===== som metal/energia (WebAudio, sem arquivo) =====
  function playBreakSound(){
    try{
      const AC = window.AudioContext || window.webkitAudioContext;
      const ac = new AC();
      const now = ac.currentTime;

      // ruído curto (estalo/energia)
      const bufferSize = Math.floor(ac.sampleRate * 0.14);
      const buffer = ac.createBuffer(1, bufferSize, ac.sampleRate);
      const data = buffer.getChannelData(0);
      for(let i=0;i<data.length;i++){
        data[i] = (Math.random()*2-1) * (1 - i/data.length);
      }
      const noise = ac.createBufferSource();
      noise.buffer = buffer;

      const bp = ac.createBiquadFilter();
      bp.type = "bandpass";
      bp.frequency.setValueAtTime(1200, now);
      bp.Q.setValueAtTime(7, now);

      const ng = ac.createGain();
      ng.gain.setValueAtTime(0.0001, now);
      ng.gain.exponentialRampToValueAtTime(0.18, now+0.02);
      ng.gain.exponentialRampToValueAtTime(0.0001, now+0.14);

      // “metal” grave subindo e caindo
      const osc = ac.createOscillator();
      osc.type = "sawtooth";
      osc.frequency.setValueAtTime(180, now);
      osc.frequency.exponentialRampToValueAtTime(420, now+0.08);
      osc.frequency.exponentialRampToValueAtTime(110, now+0.22);

      const og = ac.createGain();
      og.gain.setValueAtTime(0.0001, now);
      og.gain.exponentialRampToValueAtTime(0.12, now+0.02);
      og.gain.exponentialRampToValueAtTime(0.0001, now+0.24);

      noise.connect(bp);
      bp.connect(ng);
      ng.connect(ac.destination);

      osc.connect(og);
      og.connect(ac.destination);

      noise.start(now);
      noise.stop(now+0.15);

      osc.start(now);
      osc.stop(now+0.25);

      setTimeout(()=>ac.close().catch(()=>{}), 600);
    }catch(e){}
  }

  // ===== sequência =====
  let started = false;
  function start(){
    if(started) return;
    started = true;

    mainVideo.play().catch(()=>{});

    document.body.classList.add("breaking");
    playBreakSound();

    setTimeout(()=> document.body.classList.add("tearing"), 520);

    setTimeout(()=>{
      document.body.classList.add("entered");
      setTimeout(()=>{ entry.style.display="none"; }, 650);
    }, 1150);
  }

  entry.addEventListener("pointerdown", start);
  entry.addEventListener("keydown", (e)=>{
    if(e.key==="Enter" || e.key===" "){ e.preventDefault(); start(); }
  });
  entry.tabIndex = 0;
</script>
</body>
</html>
