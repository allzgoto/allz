<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ALLZ • HUB</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700;800;900&family=Cinzel:wght@600;800&display=swap" rel="stylesheet">

<style>
/* =========================
   RESET + THEME
   ========================= */
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;background:#050506}
button,input{font:inherit}
:root{
  --bg:#07070a;
  --bg2:#0b0c10;

  --panel:#121218;      /* mais sólido */
  --panel2:#161621;     /* variação */
  --panel3:#0e0e14;     /* header */
  --edge:rgba(255,255,255,.08);
  --edge2:rgba(255,255,255,.06);

  --txt:rgba(255,255,255,.90);
  --muted:rgba(255,255,255,.55);

  --ember: rgba(215, 103, 52, 1);
  --ember2: rgba(155, 72, 34, 1);
  --glow: rgba(215, 103, 52, .22);
  --glow2: rgba(215, 103, 52, .12);

  --r:18px;
  --r2:22px;
}

/* =========================
   BACKGROUND VIDEO
   ========================= */
#mainVideo{
  position:fixed; inset:0;
  width:100%; height:100%;
  object-fit:cover;
  z-index:0;
  opacity:0;
  transition:opacity 900ms ease, filter 900ms ease;
  filter:contrast(1.05) saturate(.9);
}
body.entered #mainVideo{
  opacity:1;
  filter:contrast(1.06) saturate(.85) blur(10px) brightness(.30);
}

/* =========================
   CANVAS FIRE LAYER
   ========================= */
#fireCanvas{
  position:fixed; inset:0;
  z-index:1;
  pointer-events:none;
}
#heat{
  position:fixed; inset:0;
  z-index:2;
  pointer-events:none;
  opacity:.55;
  background:
    radial-gradient(ellipse at 50% 110%, rgba(215,103,52,.25), transparent 55%),
    radial-gradient(ellipse at 20% 120%, rgba(215,103,52,.14), transparent 60%),
    radial-gradient(ellipse at 80% 120%, rgba(215,103,52,.14), transparent 60%);
  mix-blend-mode: screen;
  filter: blur(18px);
}

/* =========================
   VIGNETTE + GRAIN
   ========================= */
#vignette{
  position:fixed; inset:0; z-index:3;
  pointer-events:none;
  background:
    radial-gradient(circle at 50% 45%, transparent 36%, rgba(0,0,0,.78) 76%, rgba(0,0,0,.92) 100%),
    radial-gradient(circle at 20% 20%, rgba(255,255,255,.05), transparent 38%),
    radial-gradient(circle at 80% 30%, rgba(255,255,255,.04), transparent 40%);
}
#grain{
  position:fixed; inset:-25%; z-index:4; pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
  opacity:.14;
  transform:rotate(2deg);
}

/* =========================
   ENTRY (PRETO TOTAL)
   ========================= */
#entry{
  position:fixed; inset:0;
  z-index:50;
  display:grid; place-items:center;
  cursor:pointer;
  background:
    radial-gradient(circle at 50% 50%, rgba(255,255,255,.05), transparent 45%),
    #000;
}
.entryBox{
  width:min(920px, 92vw);
  height:min(520px, 84vh);
  border-radius:28px;
  background:
    radial-gradient(circle at 50% 0%, rgba(255,255,255,.06), transparent 42%),
    linear-gradient(to bottom, rgba(255,255,255,.04), rgba(0,0,0,.72));
  border:1px solid rgba(255,255,255,.10);
  box-shadow: 0 70px 240px rgba(0,0,0,.92);
  position:relative;
  overflow:hidden;
}
.entryBox::before{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(circle at 50% 70%, rgba(215,103,52,.10), transparent 55%),
    radial-gradient(circle at 20% 20%, rgba(255,255,255,.05), transparent 45%),
    radial-gradient(circle at 80% 30%, rgba(255,255,255,.04), transparent 50%);
  opacity:.65;
  pointer-events:none;
}
.entryCenter{
  position:absolute; inset:0;
  display:grid; place-items:center;
  text-align:center;
  padding:22px;
}
.entryTitle{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:10px;
  text-transform:uppercase;
  color:rgba(255,255,255,.78);
  font-size:12px;
}
.entryMain{
  margin-top:18px;
  font-family: "Cinzel", serif;
  font-weight:800;
  letter-spacing:6px;
  text-transform:uppercase;
  color:rgba(255,255,255,.92);
  font-size:36px;
}
.entrySub{
  margin-top:10px;
  color:rgba(255,255,255,.55);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:650;
  line-height:1.4;
  font-size:14px;
}
.entryBtnRow{
  margin-top:18px;
  display:flex; gap:12px;
  justify-content:center;
  flex-wrap:wrap;
}
.entryBtn{
  border:none; cursor:pointer;
  padding:14px 18px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.45);
  color:rgba(255,255,255,.90);
  box-shadow: 0 20px 120px rgba(0,0,0,.85);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:2px;
  text-transform:uppercase;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.entryBtn.primary{
  background:
    radial-gradient(circle at 30% 30%, rgba(215,103,52,.20), rgba(0,0,0,.50));
  border-color: rgba(255,255,255,.18);
}
.entryBtn:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,.06);
  border-color: rgba(255,255,255,.18);
}
.entryHint{
  margin-top:14px;
  color:rgba(255,255,255,.40);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  font-size:12px;
}
.kbd{
  display:inline-flex; align-items:center; justify-content:center;
  padding:6px 10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.35);
  margin:0 6px;
}

body.entered #entry{ opacity:0; pointer-events:none; transition:opacity 900ms ease; }

/* =========================
   HUB LAYOUT (MAIS “APP”)
   ========================= */
#hub{
  position:fixed; inset:0;
  z-index:20;
  opacity:0;
  pointer-events:none;
  transition: opacity 650ms ease;
}
body.entered #hub{ opacity:1; pointer-events:auto; }

.shell{
  position:absolute; inset:14px;
  display:grid;
  grid-template-columns: 280px 1fr 340px;
  gap:14px;
}

/* Base panel mais sólido */
.panel{
  border-radius: var(--r2);
  background: linear-gradient(to bottom, rgba(255,255,255,.03), rgba(0,0,0,.10)), var(--panel);
  border:1px solid var(--edge);
  box-shadow: 0 40px 160px rgba(0,0,0,.78);
  overflow:hidden;
}

/* =========================
   LEFT NAV
   ========================= */
.nav{
  display:flex;
  flex-direction:column;
}
.navHeader{
  padding:16px 16px 12px;
  background: var(--panel3);
  border-bottom:1px solid var(--edge2);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.brand{
  display:flex; flex-direction:column; gap:4px;
}
.brand b{
  color:rgba(255,255,255,.86);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:2px;
  text-transform:uppercase;
  font-size:12px;
}
.brand span{
  color:rgba(255,255,255,.45);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  font-size:12px;
}
.tools{ display:flex; gap:10px; }
.iconBtn{
  width:40px;height:40px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  cursor:pointer;
  display:grid; place-items:center;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.iconBtn:hover{ transform:translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.16); }
.iconBtn svg{ width:20px;height:20px; opacity:.92; }
.iconBtn[data-on="false"]{ filter: grayscale(.25) opacity(.9); }

.navList{
  padding:14px;
  display:flex; flex-direction:column;
  gap:10px;
}
.navItem{
  border:none; cursor:pointer;
  text-align:left;
  padding:14px 14px;
  border-radius:16px;
  background: rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.08);
  color:rgba(255,255,255,.84);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;

  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
  font-size:12px;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.navItem:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06); }
.navItem.active{
  background:
    radial-gradient(circle at 22% 30%, rgba(215,103,52,.18), rgba(255,255,255,.03));
  border-color: rgba(255,255,255,.16);
}
.badge{
  font-size:10px;
  letter-spacing:1px;
  opacity:.7;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.22);
}

/* profile bottom */
.navFooter{
  margin-top:auto;
  padding:14px;
}
.profile{
  border-radius:20px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  padding:12px;
  display:flex;
  gap:12px;
  align-items:center;
}
.pfp{
  width:46px;height:46px;
  border-radius:16px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
}
.pfp img{ width:100%;height:100%;object-fit:cover;display:block; }
.pmeta b{
  display:block;
  color:rgba(255,255,255,.92);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  font-size:14px;
}
.pmeta span{
  display:block;
  margin-top:2px;
  color:rgba(255,255,255,.55);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  font-size:12px;
}

/* =========================
   CENTER
   ========================= */
.center{
  display:flex;
  flex-direction:column;
  gap:14px;
  padding:14px;
}
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px;
  padding:12px;
  border-radius:18px;
  background: rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.08);
}
.search{
  flex:1;
  display:flex; align-items:center; gap:10px;
  padding:12px 12px;
  border-radius:16px;
  background: rgba(0,0,0,.22);
  border:1px solid rgba(255,255,255,.08);
}
.search svg{ width:18px;height:18px; opacity:.85; }
.search input{
  flex:1;
  border:none; outline:none;
  background:transparent;
  color:rgba(255,255,255,.90);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:800;
}
.search input::placeholder{ color:rgba(255,255,255,.40); }
.pills{ display:flex; gap:10px; align-items:center; }
.pill{
  border-radius:999px;
  padding:10px 12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.22);
  color:rgba(255,255,255,.75);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
  font-size:11px;
}
.pill.accent{
  border-color: rgba(215,103,52,.18);
  box-shadow: 0 0 0 3px rgba(215,103,52,.06) inset;
}

/* hero */
.hero{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.08);
  background:
    radial-gradient(circle at 18% 30%, rgba(215,103,52,.18), transparent 55%),
    radial-gradient(circle at 70% 30%, rgba(255,255,255,.06), transparent 50%),
    linear-gradient(to bottom, rgba(255,255,255,.03), rgba(0,0,0,.22)),
    var(--panel2);
  box-shadow: inset 0 0 22px rgba(0,0,0,.35);
  min-height: 210px;
  overflow:hidden;
  position:relative;
}
.hero::after{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(circle at center, transparent 48%, rgba(0,0,0,.55) 100%);
  pointer-events:none;
}
.heroInner{
  position:relative; z-index:2;
  height:100%;
  padding:18px;
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:16px;
}
.heroText{ max-width: 72%; }
.heroText h1{
  font-family: "Cinzel", serif;
  font-weight:800;
  letter-spacing:4px;
  text-transform:uppercase;
  color:rgba(255,255,255,.92);
  font-size:22px;
}
.heroText p{
  margin-top:10px;
  color:rgba(255,255,255,.58);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  line-height:1.35;
  font-size:13px;
}
.heroActions{
  display:flex; gap:10px; flex-wrap:wrap;
  justify-content:flex-end;
}
.actionBtn{
  border:none; cursor:pointer;
  padding:12px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.22);
  color:rgba(255,255,255,.82);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
  font-size:11px;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.actionBtn:hover{ transform:translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.16); }
.actionBtn.primary{
  background: radial-gradient(circle at 30% 30%, rgba(215,103,52,.22), rgba(0,0,0,.24));
  border-color: rgba(255,255,255,.16);
}

/* trending */
.sectionRow{
  display:flex; align-items:center; justify-content:space-between;
  padding:0 4px;
  margin-top:2px;
}
.sectionRow b{
  color:rgba(255,255,255,.58);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:2px;
  text-transform:uppercase;
  font-size:11px;
}
.grid{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.02);
  box-shadow: inset 0 0 22px rgba(0,0,0,.35);
  padding:14px;
  flex:1;
  overflow:hidden;
}
.cards{
  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap:12px;
}
.card{
  border-radius:18px;
  border:1px solid rgba(255,255,255,.08);
  background:
    radial-gradient(circle at 20% 20%, rgba(215,103,52,.10), transparent 60%),
    rgba(0,0,0,.18);
  min-height: 96px;
  position:relative;
  overflow:hidden;
}
.card::after{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(circle at center, transparent 52%, rgba(0,0,0,.55) 100%);
  pointer-events:none;
}

/* =========================
   RIGHT PANEL
   ========================= */
.right{
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.rTitle{
  color:rgba(255,255,255,.65);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:2px;
  text-transform:uppercase;
  font-size:11px;
  padding:4px 4px 0;
}
.stack{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.02);
  box-shadow: inset 0 0 22px rgba(0,0,0,.35);
  padding:12px;
  overflow:auto;
  flex:1;
}
.tile{
  border-radius:18px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(0,0,0,.20);
  padding:12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:10px;
}
.tile b{
  color:rgba(255,255,255,.88);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  font-size:13px;
}
.tile span{
  display:block;
  margin-top:4px;
  color:rgba(255,255,255,.55);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  font-size:12px;
}
.tag{
  border-radius:999px;
  padding:8px 10px;
  border:1px solid rgba(255,255,255,.10);
  background: radial-gradient(circle at 30% 30%, rgba(215,103,52,.18), rgba(0,0,0,.20));
  color:rgba(255,255,255,.75);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
  font-size:10px;
}

/* =========================
   OVERLAYS (MANTIDOS)
   ========================= */
.overlay{ position:fixed; inset:0; z-index:80; display:none; }
.overlay .dim{ position:absolute; inset:0; background:rgba(0,0,0,.86); backdrop-filter: blur(2px); }
body.scrollOpen #scrollOverlay{ display:block; }
body.socialOpen #socialOverlay{ display:block; }
body.playlistsOpen #playlistsOverlay{ display:block; }
body.adminOpen #adminOverlay{ display:block; }

/* Dialog base */
.dialog{
  position:absolute;
  left:50%; top:50%;
  transform:translate(-50%,-50%) scale(.96);
  width:min(980px, 94vw);
  height:min(620px, 84vh);
  border-radius:26px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(14,14,18,.92);
  box-shadow: 0 50px 220px rgba(0,0,0,.90);
  overflow:hidden;
  opacity:0;
  animation: popIn 260ms cubic-bezier(.12,.92,.12,1) both;
}
@keyframes popIn{
  from{ opacity:0; transform:translate(-50%,-50%) scale(.92); filter: blur(10px); }
  to{ opacity:1; transform:translate(-50%,-50%) scale(1); filter: blur(0); }
}
.dTop{
  padding:16px 16px 12px;
  border-bottom:1px solid rgba(255,255,255,.08);
  display:flex; align-items:center; justify-content:space-between;
  gap:10px;
  background: rgba(0,0,0,.22);
}
.dTitle b{
  display:block;
  color:rgba(255,255,255,.92);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  font-size:16px;
}
.dTitle span{
  display:block;
  margin-top:4px;
  color:rgba(255,255,255,.55);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  font-size:12px;
}
.closeBtn{
  border:none; cursor:pointer;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color:rgba(255,255,255,.78);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
  font-size:11px;
}
.closeBtn:hover{ background: rgba(255,255,255,.08); }

/* SOCIAL */
.smBody{
  padding:16px;
  height:calc(100% - 62px);
  overflow:auto;
}
.smCard{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  padding:16px;
}
.smProfile{
  display:flex;
  align-items:center;
  gap:14px;
}
.smAvatar{
  width:84px; height:84px;
  border-radius:22px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
}
.smAvatar img{ width:100%;height:100%;object-fit:cover;display:block; }
.smName{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  font-size:22px;
  color:rgba(255,255,255,.92);
}
.smBio{
  margin-top:4px;
  color:rgba(255,255,255,.58);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  font-size:13px;
}
.smRow{
  margin-top:14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.linkBtn{
  width:46px;height:46px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  display:grid; place-items:center;
  cursor:pointer;
  text-decoration:none;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.linkBtn:hover{ transform:translateY(-1px); background: rgba(255,255,255,.07); border-color: rgba(255,255,255,.16); }
.linkBtn svg{ width:20px;height:20px; opacity:.9; }

.discordBox{
  margin-top:14px;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.20);
  padding:14px;
}
.statusPill{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color:rgba(255,255,255,.78);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:1px;
  font-size:10px;
}
.dot{ width:10px;height:10px;border-radius:50%; background:#777; }
.statusPill[data-status="online"] .dot{ background:#3bd671; }
.statusPill[data-status="idle"] .dot{ background:#f2c94c; }
.statusPill[data-status="dnd"] .dot{ background:#ff5b5b; }
.statusPill[data-status="offline"] .dot{ background:#777; }

.dRow{
  margin-top:12px;
  display:flex; align-items:center; gap:12px;
}
.dIcon{
  width:52px;height:52px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  overflow:hidden;
}
#dAvatar{ width:100%;height:100%;object-fit:cover;display:none; }
.dInfo b{
  display:block;
  color:rgba(255,255,255,.92);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  font-size:14px;
}
.dInfo span{
  display:block;
  margin-top:2px;
  color:rgba(255,255,255,.55);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  font-size:12px;
}
#smUpdatedAt{
  margin-top:10px;
  color:rgba(255,255,255,.45);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  font-size:12px;
}

/* PLAYLISTS */
.plBody{
  height:calc(100% - 62px);
  display:grid;
  grid-template-columns: 320px 1fr;
  gap:14px;
  padding:14px;
}
.plLeft{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  padding:12px;
  overflow:auto;
}
.plHint{
  color:rgba(255,255,255,.55);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:1px;
  font-size:11px;
  margin-bottom:10px;
}
.plItem{
  width:100%;
  border:none; cursor:pointer;
  text-align:left;
  padding:12px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color:rgba(255,255,255,.88);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:900;
  transition: transform .15s ease, background .15s ease;
  margin-bottom:10px;
}
.plItem small{
  display:block;
  margin-top:4px;
  color:rgba(255,255,255,.55);
  font-weight:700;
}
.plItem:hover{ transform:translateY(-1px); background: rgba(255,255,255,.07); }
.plItem.active{
  background: radial-gradient(circle at 30% 30%, rgba(215,103,52,.22), rgba(255,255,255,.04));
  border-color: rgba(255,255,255,.16);
}
.plRight{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  overflow:hidden;
  position:relative;
}
#plFrame{ position:absolute; inset:0; width:100%; height:100%; border:none; }

/* SCROLL (pergaminho) — mantém vibe */
.scrollBody{
  height:calc(100% - 62px);
  padding:14px;
  overflow:auto;
}
.scrollPaper{
  border-radius:22px;
  background:
    radial-gradient(circle at 10% 10%, rgba(90,35,10,.38), transparent 42%),
    radial-gradient(circle at 92% 14%, rgba(80,28,8,.34), transparent 46%),
    linear-gradient(0deg, #cdb081, #eedcb6 22%, #e6cc9f 58%, #c7a572);
  border:1px solid rgba(0,0,0,.18);
  box-shadow: 0 30px 120px rgba(0,0,0,.78), inset 0 0 70px rgba(95,45,10,.22);
  overflow:hidden;
}
.scrollInner{
  padding:18px 18px 14px;
  color:rgba(35,18,8,.92);
  font-family: "Cinzel", serif;
}
.scrollInner b{
  display:block;
  letter-spacing:2px;
  text-transform:uppercase;
  font-size:12px;
}
.scrollInner p{
  margin-top:10px;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:700;
  color:rgba(35,18,8,.85);
  line-height:1.6;
  font-size:14px;
}
.cmdBar{
  margin-top:12px;
  display:flex; gap:10px; align-items:center;
  padding:10px 12px;
  border-radius:16px;
  background: rgba(0,0,0,.08);
  border:1px solid rgba(0,0,0,.14);
}
.cmdBar .prompt{
  font-weight:900;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
#cmdInput{
  flex:1;
  border:none; outline:none;
  background:transparent;
  color:rgba(35,18,8,.92);
  font-weight:800;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* ADMIN */
.adBody{ height:calc(100% - 62px); padding:14px; overflow:auto; }
.adPanel{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  padding:16px;
}
.adRow{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top:12px; }
.adLabel{
  color:rgba(255,255,255,.55);
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
  font-size:11px;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  margin-bottom:6px;
}
.adInput{
  width:100%;
  padding:12px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.24);
  color:rgba(255,255,255,.90);
  outline:none;
  font-weight:800;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.adInput:focus{
  border-color: rgba(255,255,255,.18);
  box-shadow: 0 0 0 3px rgba(215,103,52,.10);
}
.adActions{ display:flex; gap:10px; margin-top:14px; flex-wrap:wrap; }
.adBtn{
  border:none; cursor:pointer;
  padding:12px 14px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color:rgba(255,255,255,.82);
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
  font-size:11px;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.adBtn:hover{ background: rgba(255,255,255,.08); }
.adBtn.primary{
  background: radial-gradient(circle at 30% 30%, rgba(215,103,52,.24), rgba(255,255,255,.04));
  border-color: rgba(255,255,255,.16);
}
.adMsg{
  color:rgba(255,255,255,.70);
  font-weight:800;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.adDash{ display:none; margin-top:10px; }
.metrics{
  margin-top:12px;
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap:12px;
}
.metric{
  border-radius:20px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  padding:14px;
}
.metric .k{
  color:rgba(255,255,255,.55);
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:1px;
  font-size:11px;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.metric .v{
  margin-top:8px;
  font-size:30px;
  font-weight:900;
  color:rgba(255,255,255,.92);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
#adUpdated{
  margin-top:10px;
  color:rgba(255,255,255,.45);
  font-weight:700;
  font-size:12px;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* =========================
   RESPONSIVE
   ========================= */
@media (max-width: 1150px){
  .shell{ grid-template-columns: 260px 1fr 320px; }
  .cards{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 900px){
  .shell{ grid-template-columns: 1fr; }
  .panel.nav{ display:none; }
  .metrics{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  .plBody{ grid-template-columns: 1fr; }
}
@media (prefers-reduced-motion: reduce){
  #grain, #heat{ display:none; }
}
</style>
</head>

<body>

<video id="mainVideo" src="https://files.catbox.moe/klaol5.webm" playsinline preload="auto" loop muted></video>
<audio id="bgAudio" src="https://files.catbox.moe/99fu05.m4a" preload="auto"></audio>

<canvas id="fireCanvas" aria-hidden="true"></canvas>
<div id="heat" aria-hidden="true"></div>
<div id="vignette" aria-hidden="true"></div>
<div id="grain" aria-hidden="true"></div>

<!-- ENTRY -->
<section id="entry" tabindex="0">
  <div class="entryBox">
    <div class="entryCenter">
      <div class="entryTitle">PERSONAL • VAULT • HUB</div>
      <div class="entryMain">ALLZ</div>
      <div class="entrySub">
        Um lugar pra guardar coisas pessoais, gostos, jogos e links —<br>
        com estética Shadow Fight 2 (adulto, pesado, sem neon).
      </div>

      <div class="entryBtnRow">
        <button class="entryBtn primary" id="enterBtn" type="button">ENTER</button>
        <button class="entryBtn" id="enterLore" type="button">LORE</button>
        <button class="entryBtn" id="enterSocial" type="button">SOCIAL</button>
      </div>

      <div class="entryHint">Pressione <span class="kbd">ENTER</span> ou clique</div>
    </div>
  </div>
</section>

<!-- HUB -->
<section id="hub">
  <div class="shell">

    <!-- LEFT -->
    <aside class="panel nav">
      <div class="navHeader">
        <div class="brand">
          <b>ALLZ • HUB</b>
          <span>sombras • links • projetos</span>
        </div>
        <div class="tools">
          <button class="iconBtn" id="muteBtn" aria-label="Mutar áudio" data-on="true">
            <svg id="icOn" viewBox="0 0 24 24" fill="none">
              <path d="M4 10v4h4l5 4V6L8 10H4Z" fill="rgba(255,255,255,0.86)"/>
              <path d="M16 9c1 .8 1.5 1.8 1.5 3s-.5 2.2-1.5 3" stroke="rgba(215,103,52,0.85)" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M18.5 7.5c1.6 1.5 2.5 3 2.5 4.5s-.9 3-2.5 4.5" stroke="rgba(215,103,52,0.55)" stroke-width="1.4" stroke-linecap="round"/>
            </svg>
            <svg id="icOff" viewBox="0 0 24 24" fill="none" style="display:none">
              <path d="M4 10v4h4l5 4V6L8 10H4Z" fill="rgba(255,255,255,0.75)"/>
              <path d="M16 9l5 6" stroke="rgba(255,255,255,0.78)" stroke-width="1.8" stroke-linecap="round"/>
              <path d="M21 9l-5 6" stroke="rgba(255,255,255,0.78)" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </button>

          <button class="iconBtn" id="fsBtn" aria-label="Tela cheia">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M9 4H6a2 2 0 0 0-2 2v3" stroke="rgba(255,255,255,0.86)" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M15 4h3a2 2 0 0 1 2 2v3" stroke="rgba(255,255,255,0.86)" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M9 20H6a2 2 0 0 1-2-2v-3" stroke="rgba(255,255,255,0.86)" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M15 20h3a2 2 0 0 0 2-2v-3" stroke="rgba(255,255,255,0.86)" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="navList">
        <button class="navItem active" id="navHome">Home <span class="badge">•</span></button>
        <button class="navItem" id="navLore">Lore <span class="badge">V2</span></button>
        <button class="navItem" id="navSocial">Social <span class="badge">V2</span></button>
        <button class="navItem" id="navPlaylists">Playlists <span class="badge">2.1</span></button>
        <button class="navItem" id="navArchives">Archives <span class="badge">—</span></button>
        <button class="navItem" id="navAdmin">Admin <span class="badge">•</span></button>
      </div>

      <div class="navFooter">
        <div class="profile">
          <div class="pfp"><img src="https://files.catbox.moe/5lkce6.gif" alt="Allz"></div>
          <div class="pmeta">
            <b>Allz</b>
            <span>awake and unafraid</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- CENTER -->
    <main class="panel center">
      <div class="topbar">
        <div class="search">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="rgba(255,255,255,0.75)" stroke-width="1.6"/>
            <path d="M16.5 16.5 21 21" stroke="rgba(215,103,52,0.85)" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
          <input placeholder="Search (placeholder)" spellcheck="false" />
        </div>

        <div class="pills">
          <div class="pill">v2.2</div>
          <div class="pill accent">embers</div>
        </div>
      </div>

      <section class="hero">
        <div class="heroInner">
          <div class="heroText">
            <h1>Personal Hub</h1>
            <p>
              Central pra guardar coisas pessoais: links, gostos, jogos, projetos, social media (Discord ao vivo),
              playlists e um “lore terminal”. Menos transparência, mais peso.
            </p>
          </div>
          <div class="heroActions">
            <button class="actionBtn primary" id="heroLore">Abrir Lore</button>
            <button class="actionBtn" id="heroSocial">Social</button>
            <button class="actionBtn" id="heroPlaylists">Playlists</button>
          </div>
        </div>
      </section>

      <div class="sectionRow">
        <b>Trending now</b>
        <b style="opacity:.35">placeholder</b>
      </div>

      <section class="grid">
        <div class="cards">
          <div class="card" title="card 1"></div>
          <div class="card" title="card 2"></div>
          <div class="card" title="card 3"></div>
          <div class="card" title="card 4"></div>
        </div>
      </section>
    </main>

    <!-- RIGHT -->
    <aside class="panel right">
      <div class="rTitle">Relics / Intel</div>
      <div class="stack">
        <div class="tile">
          <div>
            <b>Status do Hub</b>
            <span>cinematic • dark • v2.2</span>
          </div>
          <div class="tag">system</div>
        </div>

        <div class="tile">
          <div>
            <b>Notas Rápidas</b>
            <span>ideias • ajustes • backlog</span>
          </div>
          <div class="tag">notes</div>
        </div>

        <div class="tile">
          <div>
            <b>Pergaminho Selado</b>
            <span>terminal • lore • comandos</span>
          </div>
          <div class="tag">lore</div>
        </div>

        <div class="tile">
          <div>
            <b>Ritual do Som</b>
            <span>playlists • foco</span>
          </div>
          <div class="tag">2.1</div>
        </div>

        <div class="tile">
          <div>
            <b>Discord</b>
            <span>status ao vivo</span>
          </div>
          <div class="tag">api</div>
        </div>
      </div>
    </aside>

  </div>
</section>

<!-- SOCIAL -->
<div class="overlay" id="socialOverlay" aria-hidden="true">
  <div class="dim"></div>
  <div class="dialog" role="dialog" aria-label="Social Media">
    <div class="dTop">
      <div class="dTitle">
        <b>Social Media</b>
        <span>perfil • links • discord ao vivo</span>
      </div>
      <button class="closeBtn" id="socialClose">Fechar</button>
    </div>

    <div class="smBody">
      <div class="smCard">
        <div class="smProfile">
          <div class="smAvatar"><img src="https://files.catbox.moe/5lkce6.gif" alt="Avatar"></div>
          <div>
            <div class="smName">Allz</div>
            <div class="smBio">awake and unafraid</div>
            <div class="smRow" aria-label="Links">
              <a class="linkBtn" href="https://tiktok.com/@allzdeadd" target="_blank" rel="noopener" aria-label="TikTok">
                <svg viewBox="0 0 24 24" fill="none"><path d="M14 4v10.2a3.2 3.2 0 1 1-2.2-3.05V8.2c-.3 0-.6-.02-.9-.07V5.1A7.6 7.6 0 0 0 14 4Z" fill="rgba(255,255,255,0.85)"/></svg>
              </a>
              <a class="linkBtn" href="https://open.spotify.com/user/allzdeadd" target="_blank" rel="noopener" aria-label="Spotify">
                <svg viewBox="0 0 24 24" fill="none"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm4.6 14.4a.9.9 0 0 1-1.24.3c-2.8-1.7-6.3-2.1-10.3-1.2a.9.9 0 0 1-.4-1.75c4.4-1 8.3-.5 11.5 1.4.42.25.56.8.3 1.25Zm1.3-3a1 1 0 0 1-1.37.33c-3.2-2-8-2.6-11.6-1.4a1 1 0 0 1-.6-1.9c4.1-1.3 9.3-.7 13 1.6.47.3.62.92.33 1.37Zm.1-3.2c-3.8-2.3-10-2.5-13.6-1.4a1.1 1.1 0 0 1-.65-2.1c4.2-1.3 11.1-1 15.5 1.7a1.1 1.1 0 1 1-1.1 1.8Z" fill="rgba(255,255,255,0.85)"/></svg>
              </a>
              <a class="linkBtn" href="https://instagram.com/allzdeadd" target="_blank" rel="noopener" aria-label="Instagram">
                <svg viewBox="0 0 24 24" fill="none"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Z" stroke="rgba(255,255,255,0.85)" stroke-width="1.6"/><path d="M12 16.2A4.2 4.2 0 1 0 12 7.8a4.2 4.2 0 0 0 0 8.4Z" stroke="rgba(255,255,255,0.85)" stroke-width="1.6"/><path d="M17.6 6.4h.01" stroke="rgba(255,255,255,0.85)" stroke-width="3" stroke-linecap="round"/></svg>
              </a>
              <a class="linkBtn" href="https://x.com/allzdeadd" target="_blank" rel="noopener" aria-label="X">
                <svg viewBox="0 0 24 24" fill="none"><path d="M5 19L19 5" stroke="rgba(255,255,255,0.85)" stroke-width="1.8" stroke-linecap="round"/><path d="M7 5h5l5 14h-5L7 5Z" fill="rgba(255,255,255,0.75)"/></svg>
              </a>
            </div>
          </div>
        </div>

        <div class="discordBox" style="margin-top:14px">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;">
            <div style="color:rgba(255,255,255,.80);font-weight:900;font-family:Inter,system-ui;letter-spacing:1px;text-transform:uppercase;font-size:11px;">
              Discord Status
            </div>
            <div class="statusPill" id="statusPill" data-status="idle"><span class="dot"></span><span id="statusText">Ausente</span></div>
          </div>

          <div class="dRow">
            <div class="dIcon"><img id="dAvatar" alt="Avatar Discord"></div>
            <div class="dInfo">
              <b id="dName">Allz</b>
              <span id="dTag">@allzz.exe</span>
            </div>
          </div>

          <div id="smUpdatedAt">atualizando...</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- LORE / SCROLL -->
<div class="overlay" id="scrollOverlay" aria-hidden="true">
  <div class="dim"></div>
  <div class="dialog" role="dialog" aria-label="Pergaminho">
    <div class="dTop">
      <div class="dTitle">
        <b>Pergaminho — Lore Terminal</b>
        <span>comandos: ajuda • social • fechar</span>
      </div>
      <button class="closeBtn" id="scrollClose">Fechar</button>
    </div>
    <div class="scrollBody">
      <div class="scrollPaper">
        <div class="scrollInner">
          <b>Vozes nas sombras</b>
          <p id="loreText">
            “A arena está silenciosa... mas as sombras nunca dormem.”<br>
            Digite um comando abaixo.
          </p>
          <div class="cmdBar">
            <span class="prompt">&gt;</span>
            <input id="cmdInput" placeholder="ajuda | social | fechar" autocomplete="off" spellcheck="false">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- PLAYLISTS -->
<div class="overlay" id="playlistsOverlay" aria-hidden="true">
  <div class="dim"></div>
  <div class="dialog" role="dialog" aria-label="Playlists">
    <div class="dTop">
      <div class="dTitle">
        <b>Playlists</b>
        <span>spotify embed • foco</span>
      </div>
      <button class="closeBtn" id="plClose">Fechar</button>
    </div>

    <div class="plBody">
      <div class="plLeft">
        <div class="plHint">Selecione uma playlist</div>
        <div id="plList"></div>
      </div>
      <div class="plRight">
        <iframe id="plFrame" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
      </div>
    </div>
  </div>
</div>

<!-- ADMIN -->
<div class="overlay" id="adminOverlay" aria-hidden="true">
  <div class="dim"></div>
  <div class="dialog" role="dialog" aria-label="Admin">
    <div class="dTop">
      <div class="dTitle">
        <b>Admin</b>
        <span>métricas locais</span>
      </div>
      <button class="closeBtn" id="adClose">Fechar</button>
    </div>

    <div class="adBody">
      <div class="adPanel">
        <div id="adLogin">
          <div class="adMsg" id="adMsg">Acesso restrito.</div>

          <div class="adRow">
            <div>
              <div class="adLabel">Usuário</div>
              <input class="adInput" id="adUser" placeholder="Sombra" autocomplete="off">
            </div>
            <div>
              <div class="adLabel">Senha</div>
              <input class="adInput" id="adPass" type="password" placeholder="Projeto26" autocomplete="off">
            </div>
          </div>

          <div class="adActions">
            <button class="adBtn primary" id="adLoginBtn">Entrar</button>
            <button class="adBtn" id="adHintBtn">Dica</button>
          </div>
        </div>

        <div class="adDash" id="adDash">
          <div class="adMsg">Dashboard confidencial.</div>
          <div class="metrics" id="metrics"></div>
          <div id="adUpdated">Atualizando...</div>
          <div class="adActions">
            <button class="adBtn" id="adResetBtn">Reset métricas</button>
            <button class="adBtn" id="adLogoutBtn">Sair</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<script>
/* =========================
   ELEMENTS
   ========================= */
const entry = document.getElementById("entry");
const enterBtn = document.getElementById("enterBtn");
const enterLore = document.getElementById("enterLore");
const enterSocial = document.getElementById("enterSocial");

const mainVideo = document.getElementById("mainVideo");
const bgAudio = document.getElementById("bgAudio");

const muteBtn = document.getElementById("muteBtn");
const icOn = document.getElementById("icOn");
const icOff = document.getElementById("icOff");
const fsBtn = document.getElementById("fsBtn");

/* =========================
   AUDIO (4%) + MUTE TOGGLE
   ========================= */
const MUTE_KEY = "hub_muted";
let currentVol = 0.04;
bgAudio.volume = currentVol;

let isMuted = localStorage.getItem(MUTE_KEY) === "1";
applyMuteUI();

function applyMuteUI(){
  bgAudio.muted = isMuted;
  muteBtn.dataset.on = String(!isMuted);
  icOn.style.display = isMuted ? "none" : "block";
  icOff.style.display = isMuted ? "block" : "none";
}

muteBtn.addEventListener("click", (e)=>{
  e.stopPropagation();
  isMuted = !isMuted;
  localStorage.setItem(MUTE_KEY, isMuted ? "1" : "0");
  applyMuteUI();
  if(document.body.classList.contains("entered")){
    if(isMuted) pauseBgAudio();
    else resumeBgAudio(true);
  }
});

let audioWasPlaying = false;
function pauseBgAudio(){
  try{
    audioWasPlaying = !bgAudio.paused && !bgAudio.ended && bgAudio.currentTime > 0;
    bgAudio.pause();
  }catch(e){}
}
async function resumeBgAudio(force=false){
  try{
    if(isMuted) return;
    if(force || audioWasPlaying){
      bgAudio.volume = currentVol;
      await bgAudio.play();
    }
  }catch(e){}
}

/* =========================
   FULLSCREEN
   ========================= */
async function toggleFullscreen(){
  try{
    if(!document.fullscreenElement) await document.documentElement.requestFullscreen();
    else await document.exitFullscreen();
  }catch(e){}
}
fsBtn.addEventListener("click",(e)=>{ e.stopPropagation(); toggleFullscreen(); });

/* =========================
   FIRE CANVAS (mais forte)
   ========================= */
const fireCanvas = document.getElementById("fireCanvas");
const ctx = fireCanvas.getContext("2d");
let W=0,H=0,DPR=1;

function resize(){
  DPR = Math.min(2, window.devicePixelRatio || 1);
  W = innerWidth; H = innerHeight;
  fireCanvas.width = Math.floor(W*DPR);
  fireCanvas.height = Math.floor(H*DPR);
  fireCanvas.style.width = W+"px";
  fireCanvas.style.height = H+"px";
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
resize();
addEventListener("resize", resize);

function rnd(a,b){ return a + Math.random()*(b-a); }

const sparks = [];
const SPARKS = 220; // mais denso
for(let i=0;i<SPARKS;i++) sparks.push(makeSpark(false));

function makeSpark(fromBottom=true){
  const size = rnd(1.2, 3.6);
  return {
    x: rnd(0, W),
    y: fromBottom ? rnd(H*0.65, H+60) : rnd(0, H),
    r: size,
    vy: rnd(0.35, 1.35),
    vx: rnd(-0.35, 0.35),
    tw: rnd(0.2, 1.0),
    heat: rnd(0.35, 1.0)
  };
}

let t=0;
function drawFire(){
  ctx.clearRect(0,0,W,H);

  // glow base embaixo
  const g = ctx.createRadialGradient(W*0.5, H*1.05, 10, W*0.5, H*1.05, H*0.78);
  g.addColorStop(0, "rgba(215,103,52,0.22)");
  g.addColorStop(0.55, "rgba(215,103,52,0.06)");
  g.addColorStop(1, "rgba(0,0,0,0)");
  ctx.fillStyle = g;
  ctx.fillRect(0,0,W,H);

  // “haze” ondulado (simula calor)
  t += 0.006;
  ctx.save();
  ctx.globalAlpha = 0.10;
  for(let i=0;i<4;i++){
    const y = H*0.70 + i*32 + Math.sin(t+i)*10;
    const gg = ctx.createLinearGradient(0,y-20,0,y+40);
    gg.addColorStop(0, "rgba(215,103,52,0)");
    gg.addColorStop(0.5, "rgba(215,103,52,0.12)");
    gg.addColorStop(1, "rgba(215,103,52,0)");
    ctx.fillStyle = gg;
    ctx.fillRect(0, y-30, W, 70);
  }
  ctx.restore();

  // sparks
  for(let i=0;i<sparks.length;i++){
    const p = sparks[i];
    p.y -= p.vy;
    p.x += p.vx + Math.sin((p.y+i*11)*0.003) * 0.25;

    if(p.y < -80 || p.x < -120 || p.x > W+120){
      sparks[i] = makeSpark(true);
      continue;
    }

    const a = (0.10 + p.tw*0.18) * (0.65 + p.heat*0.35);

    // core
    ctx.beginPath();
    ctx.fillStyle = `rgba(215,103,52,${a})`;
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fill();

    // glow
    ctx.beginPath();
    ctx.fillStyle = `rgba(215,103,52,${a*0.22})`;
    ctx.arc(p.x, p.y, p.r*4.0, 0, Math.PI*2);
    ctx.fill();
  }

  requestAnimationFrame(drawFire);
}
drawFire();

/* =========================
   OVERLAYS (open/close)
   ========================= */
const overlayFlags = ["scrollOpen","socialOpen","playlistsOpen","adminOpen"];

function closeAllOverlays(){
  document.body.classList.remove(...overlayFlags);
  setAria("scrollOverlay", true);
  setAria("socialOverlay", true);
  setAria("playlistsOverlay", true);
  setAria("adminOverlay", true);
}
function setAria(id, hidden){
  const el = document.getElementById(id);
  if(el) el.setAttribute("aria-hidden", hidden ? "true" : "false");
}

function openOverlay(flag, id){
  if(!document.body.classList.contains("entered")) return;
  closeAllOverlays();
  pauseBgAudio();
  document.body.classList.add(flag);
  setAria(id, false);
}

function closeOverlay(flag, id){
  document.body.classList.remove(flag);
  setAria(id, true);
  resumeBgAudio();
}

/* =========================
   START / ENTER
   ========================= */
let started=false;
async function start(){
  if(started) return;
  started=true;

  // áudio (se não mutado)
  try{
    if(!isMuted){
      bgAudio.currentTime = 0;
      bgAudio.volume = currentVol;
      await bgAudio.play();
    }
  }catch(e){}

  // vídeo (mudo sempre)
  try{ await mainVideo.play(); }catch(e){}

  document.body.classList.add("entered");

  // abre social automaticamente (mantido)
  setTimeout(()=> openSocial(), 900);
}

entry.addEventListener("pointerdown",(e)=>{
  // evita double click no botão
  if(e.target === enterBtn || e.target === enterLore || e.target === enterSocial) return;
  start();
});
enterBtn.addEventListener("click",(e)=>{ e.stopPropagation(); start(); });

entry.addEventListener("keydown",(e)=>{
  if(e.key==="Enter" || e.key===" "){ e.preventDefault(); start(); }
});

enterLore.addEventListener("click",(e)=>{ e.stopPropagation(); start(); setTimeout(openScroll, 950); });
enterSocial.addEventListener("click",(e)=>{ e.stopPropagation(); start(); setTimeout(openSocial, 950); });

/* =========================
   NAV + HERO
   ========================= */
const navHome = document.getElementById("navHome");
const navLore = document.getElementById("navLore");
const navSocial = document.getElementById("navSocial");
const navPlaylists = document.getElementById("navPlaylists");
const navArchives = document.getElementById("navArchives");
const navAdmin = document.getElementById("navAdmin");

function setActive(btn){
  [navHome,navLore,navSocial,navPlaylists,navArchives,navAdmin].forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

document.getElementById("heroLore").addEventListener("click", ()=>{ setActive(navLore); openScroll(); });
document.getElementById("heroSocial").addEventListener("click", ()=>{ setActive(navSocial); openSocial(); });
document.getElementById("heroPlaylists").addEventListener("click", ()=>{ setActive(navPlaylists); openPlaylists(); });

navHome.addEventListener("click", ()=>{ setActive(navHome); closeAllOverlays(); resumeBgAudio(); });
navLore.addEventListener("click", ()=>{ setActive(navLore); openScroll(); });
navSocial.addEventListener("click", ()=>{ setActive(navSocial); openSocial(); });
navPlaylists.addEventListener("click", ()=>{ setActive(navPlaylists); openPlaylists(); });
navArchives.addEventListener("click", ()=>{ setActive(navArchives); closeAllOverlays(); alert("Archives (placeholder) — V2.2"); });
navAdmin.addEventListener("click", ()=>{ setActive(navAdmin); openAdmin(); });

/* =========================
   SOCIAL
   ========================= */
const socialOverlay = document.getElementById("socialOverlay");
const socialClose = document.getElementById("socialClose");
const statusPill = document.getElementById("statusPill");
const statusText = document.getElementById("statusText");
const dAvatar = document.getElementById("dAvatar");
const dName = document.getElementById("dName");
const dTag = document.getElementById("dTag");
const smUpdatedAt = document.getElementById("smUpdatedAt");

function openSocial(){
  openOverlay("socialOpen","socialOverlay");
  metricInc("m_social_opens");
  fetchLanyard();
  setTimeout(()=>socialClose.focus(), 60);
}
function closeSocial(){ closeOverlay("socialOpen","socialOverlay"); }

socialClose.addEventListener("click", closeSocial);
socialOverlay.addEventListener("click",(e)=>{ if(e.target.classList.contains("dim")) closeSocial(); });

const LANYARD_USER_ID = "513830615225860096";
const LANYARD_URL = `https://api.lanyard.rest/v1/users/${LANYARD_USER_ID}`;

function mapStatusPT(s){
  if(s === "online") return "Online";
  if(s === "idle") return "Ausente";
  if(s === "dnd") return "Não perturbe";
  return "Offline";
}
function setStatus(s){
  statusPill.dataset.status = s || "offline";
  statusText.textContent = mapStatusPT(s || "offline");
}
function setUpdated(){
  const d = new Date();
  const hh = String(d.getHours()).padStart(2,"0");
  const mm = String(d.getMinutes()).padStart(2,"0");
  smUpdatedAt.textContent = `atualizado às ${hh}:${mm}`;
}

async function fetchLanyard(){
  setStatus("idle");
  setUpdated();
  try{
    const r = await fetch(LANYARD_URL, { cache:"no-store" });
    if(!r.ok) throw new Error("http");
    const j = await r.json();
    const data = j?.data;
    if(!data) throw new Error("data");

    setStatus(data.discord_status || "offline");

    const dn =
      data.discord_user?.global_name ||
      data.discord_user?.display_name ||
      data.discord_user?.username ||
      "Allz";
    dName.textContent = dn;
    dTag.textContent = "@allzz.exe";

    const uid = data.discord_user?.id || LANYARD_USER_ID;
    const av = data.discord_user?.avatar;
    if(av){
      const ext = av.startsWith("a_") ? "gif" : "png";
      dAvatar.src = `https://cdn.discordapp.com/avatars/${uid}/${av}.${ext}?size=256`;
      dAvatar.style.display = "block";
    }else{
      dAvatar.style.display = "none";
    }
    setUpdated();
  }catch(e){
    // fallback ok
  }
}

/* =========================
   SCROLL / LORE
   ========================= */
const scrollOverlay = document.getElementById("scrollOverlay");
const scrollClose = document.getElementById("scrollClose");
const cmdInput = document.getElementById("cmdInput");
const loreText = document.getElementById("loreText");

function openScroll(){
  openOverlay("scrollOpen","scrollOverlay");
  metricInc("m_scroll_opens");
  setTimeout(()=>cmdInput.focus(), 60);
}
function closeScroll(){ closeOverlay("scrollOpen","scrollOverlay"); }

scrollClose.addEventListener("click", closeScroll);
scrollOverlay.addEventListener("click",(e)=>{ if(e.target.classList.contains("dim")) closeScroll(); });

function escapeHtml(s){
  return String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");
}

cmdInput.addEventListener("keydown",(e)=>{
  if(e.key !== "Enter") return;
  const raw = cmdInput.value.trim();
  if(!raw) return;
  cmdInput.value = "";
  const cmd = raw.toLowerCase();

  if(cmd === "ajuda" || cmd === "help" || cmd === "?"){
    loreText.innerHTML = `Comandos: <b>social</b>, <b>fechar</b>, <b>ajuda</b><br><br>
      Extra: você pode transformar isso num “terminal” de links depois.`;
    return;
  }
  if(cmd === "fechar" || cmd === "close"){
    loreText.innerHTML = `Pergaminho selado.`;
    setTimeout(closeScroll, 240);
    return;
  }
  if(cmd === "social"){
    loreText.innerHTML = `Abrindo Social...`;
    setTimeout(openSocial, 240);
    return;
  }

  loreText.innerHTML = `Comando desconhecido: <b>${escapeHtml(raw)}</b><br>
    Digite <b>ajuda</b>.`;
});

/* =========================
   PLAYLISTS
   ========================= */
const playlistsOverlay = document.getElementById("playlistsOverlay");
const plClose = document.getElementById("plClose");
const plList = document.getElementById("plList");
const plFrame = document.getElementById("plFrame");

const PLAYLISTS = [
  { name:"Shadow Vibes", desc:"sombras • combate • foco", embed:"https://open.spotify.com/embed/playlist/37i9dQZF1DX0XUsuxWHRQd?utm_source=generator" },
  { name:"Midnight", desc:"noite • chill • dark", embed:"https://open.spotify.com/embed/playlist/37i9dQZF1DX4fpCWaHOned?utm_source=generator" },
  { name:"Favorites", desc:"minhas faixas", embed:"https://open.spotify.com/embed/playlist/37i9dQZF1DXcBWIGoYBM5M?utm_source=generator" }
];

function renderPlaylists(){
  plList.innerHTML = "";
  PLAYLISTS.forEach((p, idx)=>{
    const btn = document.createElement("button");
    btn.className = "plItem";
    btn.type = "button";
    btn.innerHTML = `${escapeHtml(p.name)}<small>${escapeHtml(p.desc)}</small>`;
    btn.addEventListener("click", ()=> setPlaylist(idx));
    plList.appendChild(btn);
  });
}
function setPlaylist(i){
  const items = [...plList.querySelectorAll(".plItem")];
  items.forEach((el, idx)=> el.classList.toggle("active", idx===i));
  plFrame.src = PLAYLISTS[i].embed;
  localStorage.setItem("pl_last", String(i));
}
function openPlaylists(){
  openOverlay("playlistsOpen","playlistsOverlay");
  metricInc("m_playlists_opens");
  renderPlaylists();
  const last = Number(localStorage.getItem("pl_last") || "0");
  setPlaylist(Math.max(0, Math.min(last, PLAYLISTS.length-1)));
  setTimeout(()=>plClose.focus(), 60);
}
function closePlaylists(){
  plFrame.src = "about:blank";
  closeOverlay("playlistsOpen","playlistsOverlay");
}
plClose.addEventListener("click", closePlaylists);
playlistsOverlay.addEventListener("click",(e)=>{ if(e.target.classList.contains("dim")) closePlaylists(); });

/* =========================
   ADMIN
   ========================= */
const adminOverlay = document.getElementById("adminOverlay");
const adClose = document.getElementById("adClose");
const adLogin = document.getElementById("adLogin");
const adDash = document.getElementById("adDash");
const adMsg = document.getElementById("adMsg");
const adUser = document.getElementById("adUser");
const adPass = document.getElementById("adPass");
const adLoginBtn = document.getElementById("adLoginBtn");
const adHintBtn = document.getElementById("adHintBtn");
const metricsEl = document.getElementById("metrics");
const adUpdated = document.getElementById("adUpdated");
const adResetBtn = document.getElementById("adResetBtn");
const adLogoutBtn = document.getElementById("adLogoutBtn");

const ADMIN_USER = "Sombra";
const ADMIN_PASS = "Projeto26";
const ADMIN_OK_KEY = "admin_ok";

function nowHHMM(){
  const d = new Date();
  return `${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`;
}
function metricGet(k){ return Number(localStorage.getItem(k) || "0"); }
function metricSet(k,v){ localStorage.setItem(k, String(v)); }
function metricInc(k){ const v = metricGet(k)+1; metricSet(k,v); return v; }

function buildMetrics(){
  const list = [
    {key:"m_site_opens", label:"Site Opens"},
    {key:"m_social_opens", label:"Social Opens"},
    {key:"m_scroll_opens", label:"Scroll Opens"},
    {key:"m_playlists_opens", label:"Playlists Opens"},
    {key:"m_admin_logins", label:"Admin Logins"}
  ];
  metricsEl.innerHTML = "";
  list.forEach(m=>{
    const div = document.createElement("div");
    div.className = "metric";
    div.innerHTML = `<div class="k">${escapeHtml(m.label)}</div><div class="v">${metricGet(m.key)}</div>`;
    metricsEl.appendChild(div);
  });
  adUpdated.textContent = `Atualizado às ${nowHHMM()}`;
}

function showLogin(msg){
  adLogin.style.display = "block";
  adDash.style.display = "none";
  if(msg) adMsg.textContent = msg;
}
function showDash(){
  adLogin.style.display = "none";
  adDash.style.display = "block";
  buildMetrics();
}

function openAdmin(){
  openOverlay("adminOpen","adminOverlay");
  metricInc("m_admin_opens");
  if(localStorage.getItem(ADMIN_OK_KEY)==="1"){
    showDash();
  }else{
    showLogin("Acesso restrito.");
    setTimeout(()=>adUser.focus(), 60);
  }
}
function closeAdmin(){ closeOverlay("adminOpen","adminOverlay"); }

adClose.addEventListener("click", closeAdmin);
adminOverlay.addEventListener("click",(e)=>{ if(e.target.classList.contains("dim")) closeAdmin(); });

adHintBtn.addEventListener("click", ()=>{ adMsg.textContent = "Usuário: Sombra • Senha: Projeto26"; });

function tryLogin(){
  const u = (adUser.value||"").trim();
  const p = (adPass.value||"").trim();
  if(u===ADMIN_USER && p===ADMIN_PASS){
    localStorage.setItem(ADMIN_OK_KEY,"1");
    metricInc("m_admin_logins");
    adUser.value=""; adPass.value="";
    showDash();
  }else{
    adMsg.textContent = "Credenciais inválidas.";
  }
}
adLoginBtn.addEventListener("click", tryLogin);
adPass.addEventListener("keydown",(e)=>{ if(e.key==="Enter") tryLogin(); });

adResetBtn.addEventListener("click", ()=>{
  ["m_site_opens","m_social_opens","m_scroll_opens","m_playlists_opens","m_admin_logins"].forEach(k=>localStorage.removeItem(k));
  buildMetrics();
  adMsg.textContent = "Métricas resetadas.";
});
adLogoutBtn.addEventListener("click", ()=>{
  localStorage.removeItem(ADMIN_OK_KEY);
  showLogin("Sessão encerrada.");
});

/* =========================
   ESC: fecha overlays
   ========================= */
document.addEventListener("keydown",(e)=>{
  if(e.key!=="Escape") return;
  if(document.body.classList.contains("adminOpen")) return closeAdmin();
  if(document.body.classList.contains("playlistsOpen")) return closePlaylists();
  if(document.body.classList.contains("socialOpen")) return closeSocial();
  if(document.body.classList.contains("scrollOpen")) return closeScroll();
});

/* =========================
   METRICS base
   ========================= */
metricInc("m_site_opens");
</script>

</body>
</html>
